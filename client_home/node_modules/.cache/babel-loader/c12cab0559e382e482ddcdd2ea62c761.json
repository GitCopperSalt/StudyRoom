{"remainingRequest":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\src\\components\\diy\\history_widget.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\src\\components\\diy\\history_widget.vue","mtime":1766719474894},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\babel.config.js","mtime":1647778738000},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766388186406},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\babel-loader\\lib\\index.js","mtime":1766388187764},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766388186406},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":1766388188316}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgaGlzdG9yeVNlcnZpY2UgfSBmcm9tICdAL3NlcnZpY2VzL2hpc3RvcnlTZXJ2aWNlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdIaXN0b3J5V2lkZ2V0JywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaGlzdG9yeURhdGE6IG51bGwsCiAgICAgIHRvZGF5RGF0ZUluZm86IHt9LAogICAgICBtb2NrSW1hZ2VVcmw6ICdodHRwczovL2Nkbi54eGh6bS5jbi92MmFwaS9jYWNoZS9oaXN0b3J5LzIwMjUtMTItMjYuanBnJywKICAgICAgbW9kYWxJZDogJ2hpc3RvcnktbW9kYWwtJyArIERhdGUubm93KCkKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0RGF0YSgpOwogICAgdGhpcy5sb2FkSGlzdG9yeURhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXREYXRhKCkgewogICAgICB0aGlzLnRvZGF5RGF0ZUluZm8gPSBoaXN0b3J5U2VydmljZS5nZXRUb2RheURhdGVJbmZvKCk7CiAgICB9LAogICAgYXN5bmMgbG9hZEhpc3RvcnlEYXRhKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhpc3RvcnlTZXJ2aWNlLmdldFRvZGF5SW5IaXN0b3J5KCk7CiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLmhpc3RvcnlEYXRhID0gcmVzdWx0OwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfliqDovb3ljoblj7LmlbDmja7lpLHotKU6JywgZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgdmlld0ltYWdlKCkgewogICAgICB0aGlzLiRidk1vZGFsLnNob3codGhpcy5tb2RhbElkKTsKICAgIH0sCiAgICBoYW5kbGVJbWFnZUVycm9yKGV2ZW50KSB7CiAgICAgIGNvbnNvbGUud2Fybign5Y6G5Y+y5Zu+54mH5Yqg6L295aSx6LSlOicsIGV2ZW50LnRhcmdldC5zcmMpOwogICAgICBldmVudC50YXJnZXQuc3JjID0gdGhpcy5tb2NrSW1hZ2VVcmw7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["historyService","name","data","historyData","todayDateInfo","mockImageUrl","modalId","Date","now","mounted","initData","loadHistoryData","methods","getTodayDateInfo","result","getTodayInHistory","success","error","console","viewImage","$bvModal","show","handleImageError","event","warn","target","src"],"sources":["src/components/diy/history_widget.vue"],"sourcesContent":["<template>\n\t<div class=\"history-widget\">\n\t\t<div class=\"history-header\">\n\t\t\t<h5 class=\"history-title\">\n\t\t\t\t<b-icon icon=\"calendar3\" class=\"mr-2\"></b-icon>\n\t\t\t\t历史上的今天\n\t\t\t</h5>\n\t\t</div>\n\n\t\t<div class=\"history-image-container\">\n\t\t\t<div class=\"history-image-wrapper\" @click=\"viewImage\">\n\t\t\t\t<img \n\t\t\t\t\t:src=\"historyData?.imageUrl || mockImageUrl\" \n\t\t\t\t\t:alt=\"`历史上的今天 - ${todayDateInfo.dateString}`\"\n\t\t\t\t\t@error=\"handleImageError\"\n\t\t\t\t\tclass=\"history-image\"\n\t\t\t\t/>\n\t\t\t\t<div class=\"image-overlay\">\n\t\t\t\t\t<b-icon icon=\"eye\" class=\"overlay-icon\"></b-icon>\n\t\t\t\t\t<span class=\"overlay-text\">点击查看大图</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- 图片查看模态框 -->\n\t\t<b-modal \n\t\t\t:id=\"modalId\" \n\t\t\ttitle=\"历史上的今天\" \n\t\t\thide-footer\n\t\t\tsize=\"lg\"\n\t\t\tcentered\n\t\t>\n\t\t\t<div class=\"text-center\">\n\t\t\t\t<img \n\t\t\t\t\t:src=\"historyData?.imageUrl || mockImageUrl\" \n\t\t\t\t\t:alt=\"`历史上的今天 - ${todayDateInfo.dateString}`\"\n\t\t\t\t\tclass=\"modal-image\"\n\t\t\t\t/>\n\t\t\t\t<p class=\"mt-3 text-muted\">\n\t\t\t\t\t{{ todayDateInfo.fullDateString }} • 历史图片\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</b-modal>\n\t</div>\n</template>\n\n<script>\nimport { historyService } from '@/services/historyService'\n\nexport default {\n\tname: 'HistoryWidget',\n\tdata() {\n\t\treturn {\n\t\t\thistoryData: null,\n\t\t\ttodayDateInfo: {},\n\t\t\tmockImageUrl: 'https://cdn.xxhzm.cn/v2api/cache/history/2025-12-26.jpg',\n\t\t\tmodalId: 'history-modal-' + Date.now()\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.initData()\n\t\tthis.loadHistoryData()\n\t},\n\tmethods: {\n\t\tinitData() {\n\t\t\tthis.todayDateInfo = historyService.getTodayDateInfo()\n\t\t},\n\n\t\tasync loadHistoryData() {\n\t\t\ttry {\n\t\t\t\tconst result = await historyService.getTodayInHistory()\n\t\t\t\tif (result.success) {\n\t\t\t\t\tthis.historyData = result\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('加载历史数据失败:', error)\n\t\t\t}\n\t\t},\n\n\t\tviewImage() {\n\t\t\tthis.$bvModal.show(this.modalId)\n\t\t},\n\n\t\thandleImageError(event) {\n\t\t\tconsole.warn('历史图片加载失败:', event.target.src)\n\t\t\tevent.target.src = this.mockImageUrl\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.history-widget {\n\tbackground-color: #fff;\n\tborder-radius: 8px;\n\tpadding: 1rem;\n\tcolor: #333;\n\tbox-shadow: 0 2px 8px rgba(0,0,0,0.08);\n\tmargin-top: 1rem;\n}\n\n.history-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin-bottom: 1.5rem;\n}\n\n.history-title {\n\tmargin: 0;\n\tfont-weight: 600;\n\tcolor: #333;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.history-date {\n\tfont-size: 0.9rem;\n\tcolor: #666;\n\tfont-weight: 500;\n}\n\n.loading-state, .error-state {\n\ttext-align: center;\n\tpadding: 2rem;\n\tcolor: white;\n}\n\n.history-image-container {\n\tposition: relative;\n\tborder-radius: 8px;\n\toverflow: hidden;\n\tbox-shadow: 0 2px 12px rgba(0,0,0,0.2);\n}\n\n.history-image-wrapper {\n\tposition: relative;\n\tcursor: pointer;\n\ttransition: transform 0.3s ease;\n}\n\n.history-image-wrapper:hover {\n\ttransform: scale(1.02);\n}\n\n.history-image {\n\twidth: 100%;\n\theight: 200px;\n\tobject-fit: cover;\n\tdisplay: block;\n}\n\n.image-overlay {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground: rgba(0,0,0,0.4);\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\topacity: 0;\n\ttransition: opacity 0.3s ease;\n\tcolor: white;\n}\n\n.history-image-wrapper:hover .image-overlay {\n\topacity: 1;\n}\n\n.overlay-icon {\n\tfont-size: 2rem;\n\tmargin-bottom: 0.5rem;\n}\n\n.overlay-text {\n\tfont-size: 0.9rem;\n\tfont-weight: 500;\n}\n\n.modal-image {\n\twidth: 100%;\n\tmax-height: 70vh;\n\tobject-fit: contain;\n\tborder-radius: 8px;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n\t.history-widget {\n\t\tpadding: 1rem;\n\t}\n\n\t.history-header {\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\tgap: 0.5rem;\n\t}\n\n\t.history-image {\n\t\theight: 150px;\n\t}\n\n\t.history-actions {\n\t\tflex-wrap: wrap;\n\t}\n}\n\n/* 自定义滚动条 */\n.history-image-container::-webkit-scrollbar {\n\twidth: 4px;\n}\n\n.history-image-container::-webkit-scrollbar-track {\n\tbackground: rgba(255,255,255,0.1);\n\tborder-radius: 2px;\n}\n\n.history-image-container::-webkit-scrollbar-thumb {\n\tbackground: rgba(255,255,255,0.3);\n\tborder-radius: 2px;\n}\n\n.history-image-container::-webkit-scrollbar-thumb:hover {\n\tbackground: rgba(255,255,255,0.5);\n}\n</style>"],"mappings":"AA+CA,SAAAA,cAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,WAAA;MACAC,aAAA;MACAC,YAAA;MACAC,OAAA,qBAAAC,IAAA,CAAAC,GAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,QAAA;IACA,KAAAC,eAAA;EACA;EACAC,OAAA;IACAF,SAAA;MACA,KAAAN,aAAA,GAAAJ,cAAA,CAAAa,gBAAA;IACA;IAEA,MAAAF,gBAAA;MACA;QACA,MAAAG,MAAA,SAAAd,cAAA,CAAAe,iBAAA;QACA,IAAAD,MAAA,CAAAE,OAAA;UACA,KAAAb,WAAA,GAAAW,MAAA;QACA;MACA,SAAAG,KAAA;QACAC,OAAA,CAAAD,KAAA,cAAAA,KAAA;MACA;IACA;IAEAE,UAAA;MACA,KAAAC,QAAA,CAAAC,IAAA,MAAAf,OAAA;IACA;IAEAgB,iBAAAC,KAAA;MACAL,OAAA,CAAAM,IAAA,cAAAD,KAAA,CAAAE,MAAA,CAAAC,GAAA;MACAH,KAAA,CAAAE,MAAA,CAAAC,GAAA,QAAArB,YAAA;IACA;EACA;AACA","ignoreList":[]}]}