{"remainingRequest":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\src\\components\\diy\\form_editor.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\src\\components\\diy\\form_editor.vue","mtime":1647778738000},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\babel.config.js","mtime":1647778738000},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766388186406},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\babel-loader\\lib\\index.js","mtime":1766388187764},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766388186406},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":1766388188316}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBtaXhpbiBmcm9tICJAL21peGlucy9jb21wb25lbnQuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbbWl4aW5dLAogIHByb3BzOiB7CiAgICBmb3JtOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgY29udGVudDogIiIKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgcG9zdF91cmw6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgfSwKICAgIHB1Ymxpc2hfZmxhZzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgbWV0aG9kczogewogICAgLyoqCiAgICAgKiDlj5Hooajor4TorroKICAgICAqLwogICAgcHVibGlzaCgpIHsKICAgICAgaWYgKCF0aGlzLnVzZXIudXNlcl9pZCkgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvYWNjb3VudC9sb2dpbiIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgZm9ybSA9IHRoaXMuZm9ybTsKICAgICAgZm9ybSA9IE9iamVjdC5hc3NpZ24oZm9ybSwgewogICAgICAgIHVzZXJfaWQ6IHRoaXMudXNlci51c2VyX2lkLAogICAgICAgIGF2YXRhcjogdGhpcy51c2VyLmF2YXRhciwKICAgICAgICBuaWNrbmFtZTogdGhpcy51c2VyLm5pY2tuYW1lCiAgICAgIH0pOwogICAgICBpZiAoIWZvcm0uY29udGVudCkgewogICAgICAgIHRoaXMuJHRvYXN0KCLovpPlhaXlhoXlrrnkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIHBvc3RfdXJsID0gdGhpcy5wb3N0X3VybDsKICAgICAgaWYgKCFwb3N0X3VybCkgewogICAgICAgIHBvc3RfdXJsID0gIn4vYXBpL2NvbW1lbnQvYWRkPyI7CiAgICAgIH0KICAgICAgdGhpcy4kcG9zdChwb3N0X3VybCwgZm9ybSwgcmVzID0+IHsKICAgICAgICBpZiAocmVzLnJlc3VsdCkgewogICAgICAgICAgdGhpcy4kZW1pdCgidXBkYXRlX2NvbW1lbnQiKTsKICAgICAgICAgIHRoaXMuZm9ybS5jb250ZW50ID0gIiI7CiAgICAgICAgfSBlbHNlIGlmIChyZXMuZXJyb3IpIHsKICAgICAgICAgIHRoaXMuJHRvYXN0KHJlcy5lcnJvci5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgY29tcG9uZW50czoge30KfTs="},{"version":3,"names":["mixin","mixins","props","form","type","Object","default","content","post_url","String","publish_flag","Boolean","data","methods","publish","user","user_id","$router","push","assign","avatar","nickname","$toast","$post","res","result","$emit","error","message","components"],"sources":["src/components/diy/form_editor.vue"],"sourcesContent":["<template>\n  <div v-if=\"publish_flag\" class=\"form_editor\">\n    <div class=\"editor\">\n      <!-- 富文本编辑 -->\n      <quill-editor v-model.trim=\"form.content\" class=\"form_editor_block\">\n      </quill-editor>\n    </div>\n    <div class=\"btn_publish\">\n      <b-button variant=\"outline-primary\" block @click=\"publish()\">发表</b-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport mixin from \"@/mixins/component.js\";\nexport default {\n  mixins: [mixin],\n  props: {\n    form: {\n      type: Object,\n      default() {\n        return {\n          content: \"\",\n        };\n      },\n    },\n    post_url: {\n      type: String,\n      default() {\n        return \"\";\n      },\n    },\n    publish_flag:{\n      type: Boolean,\n      default() {\n        return true;\n      },\n    }\n  },\n  data() {\n    return {};\n  },\n  methods: {\n    /**\n     * 发表评论\n     */\n    publish() {\n      if (!this.user.user_id) {\n        this.$router.push(\"/account/login\");\n        return\n      }\n      var form = this.form;\n      form = Object.assign(form, {\n        user_id: this.user.user_id,\n        avatar: this.user.avatar,\n        nickname: this.user.nickname,\n      });\n      if(!form.content){\n        this.$toast(\"输入内容不能为空\")\n        return\n      }\n      var post_url = this.post_url\n      if(!post_url){\n        post_url = \"~/api/comment/add?\"\n      }\n      this.$post(post_url, form, (res) => {\n        if (res.result) {\n          this.$emit(\"update_comment\");\n          this.form.content = \"\";\n        } else if (res.error) {\n          this.$toast(res.error.message);\n        }\n      });\n    },\n  },\n  components: {},\n};\n</script>\n\n<style scoped>\n.btn_publish {\n  text-align: right;\n  margin-top: 10px;\n}\n.btn_publish button {\n  border-radius: 3px;\n  cursor: pointer;\n}\n.btn_publish button:hover {\n  background: var(--color_success_b);\n  color: white;\n}\n</style>\n"],"mappings":";AAcA,OAAAA,KAAA;AACA;EACAC,MAAA,GAAAD,KAAA;EACAE,KAAA;IACAC,IAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;QACA;UACAC,OAAA;QACA;MACA;IACA;IACAC,QAAA;MACAJ,IAAA,EAAAK,MAAA;MACAH,QAAA;QACA;MACA;IACA;IACAI,YAAA;MACAN,IAAA,EAAAO,OAAA;MACAL,QAAA;QACA;MACA;IACA;EACA;EACAM,KAAA;IACA;EACA;EACAC,OAAA;IACA;AACA;AACA;IACAC,QAAA;MACA,UAAAC,IAAA,CAAAC,OAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;QACA;MACA;MACA,IAAAf,IAAA,QAAAA,IAAA;MACAA,IAAA,GAAAE,MAAA,CAAAc,MAAA,CAAAhB,IAAA;QACAa,OAAA,OAAAD,IAAA,CAAAC,OAAA;QACAI,MAAA,OAAAL,IAAA,CAAAK,MAAA;QACAC,QAAA,OAAAN,IAAA,CAAAM;MACA;MACA,KAAAlB,IAAA,CAAAI,OAAA;QACA,KAAAe,MAAA;QACA;MACA;MACA,IAAAd,QAAA,QAAAA,QAAA;MACA,KAAAA,QAAA;QACAA,QAAA;MACA;MACA,KAAAe,KAAA,CAAAf,QAAA,EAAAL,IAAA,EAAAqB,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA,KAAAC,KAAA;UACA,KAAAvB,IAAA,CAAAI,OAAA;QACA,WAAAiB,GAAA,CAAAG,KAAA;UACA,KAAAL,MAAA,CAAAE,GAAA,CAAAG,KAAA,CAAAC,OAAA;QACA;MACA;IACA;EACA;EACAC,UAAA;AACA","ignoreList":[]}]}