{"remainingRequest":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\src\\services\\historyService.js","dependencies":[{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\src\\services\\historyService.js","mtime":1766718923446},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\babel.config.js","mtime":1647778738000},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766388186406},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\babel-loader\\lib\\index.js","mtime":1766388187764}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpjb25zdCBBUElfQkFTRV9VUkwgPSAnaHR0cHM6Ly92Mi54eGFwaS5jbi9hcGkvaGlzdG9yeXBpYyc7CmV4cG9ydCBjb25zdCBoaXN0b3J5U2VydmljZSA9IHsKICAvLyDojrflj5bljoblj7LkuIrnmoTku4rlpKnlm77niYcKICBhc3luYyBnZXRUb2RheUluSGlzdG9yeSgpIHsKICAgIHRyeSB7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KEFQSV9CQVNFX1VSTCk7CiAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBzdWNjZXNzOiB0cnVlLAogICAgICAgICAgaW1hZ2VVcmw6IHJlc3BvbnNlLmRhdGEuZGF0YSwKICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEubXNnLAogICAgICAgICAgcmVxdWVzdElkOiByZXNwb25zZS5kYXRhLnJlcXVlc3RfaWQKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WOhuWPsuS4iueahOS7iuWkqUFQSei/lOWbnumUmeivrzonLCByZXNwb25zZS5kYXRhLm1zZyk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLAogICAgICAgICAgaW1hZ2VVcmw6IG51bGwsCiAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLm1zZyB8fCAn6I635Y+W5Y6G5Y+y5LiK55qE5LuK5aSp5aSx6LSlJywKICAgICAgICAgIHJlcXVlc3RJZDogcmVzcG9uc2UuZGF0YS5yZXF1ZXN0X2lkCiAgICAgICAgfTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5Y6G5Y+y5LiK55qE5LuK5aSp5aSx6LSlOicsIGVycm9yKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBzdWNjZXNzOiBmYWxzZSwKICAgICAgICBpbWFnZVVybDogbnVsbCwKICAgICAgICBtZXNzYWdlOiAn572R57uc6ZSZ6K+v77yM6K+356iN5ZCO6YeN6K+VJywKICAgICAgICByZXF1ZXN0SWQ6IG51bGwKICAgICAgfTsKICAgIH0KICB9LAogIC8vIOiOt+WPluWOhuWPsuS4iueahOS7iuWkqeWbvueJh++8iOebtOaOpei3s+i9rOaooeW8j++8iQogIGFzeW5jIGdldFRvZGF5SW5IaXN0b3J5UmVkaXJlY3QoKSB7CiAgICB0cnkgewogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgJHtBUElfQkFTRV9VUkx9P3JldHVybj0zMDJgLCB7CiAgICAgICAgbWF4UmVkaXJlY3RzOiAwLAogICAgICAgIHZhbGlkYXRlU3RhdHVzOiBmdW5jdGlvbiAoc3RhdHVzKSB7CiAgICAgICAgICByZXR1cm4gc3RhdHVzID09PSAzMDI7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMzAyICYmIHJlc3BvbnNlLmhlYWRlcnMubG9jYXRpb24pIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgc3VjY2VzczogdHJ1ZSwKICAgICAgICAgIGltYWdlVXJsOiByZXNwb25zZS5oZWFkZXJzLmxvY2F0aW9uLAogICAgICAgICAgbWVzc2FnZTogJ+iOt+WPluaIkOWKnycsCiAgICAgICAgICByZXF1ZXN0SWQ6IG51bGwKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IG5ldyBFcnJvcign5pyq6I635Y+W5Yiw6YeN5a6a5ZCR5Zyw5Z2AJyk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluWOhuWPsuS4iueahOS7iuWkqemHjeWumuWQkeWksei0pTonLCBlcnJvcik7CiAgICAgIHJldHVybiB7CiAgICAgICAgc3VjY2VzczogZmFsc2UsCiAgICAgICAgaW1hZ2VVcmw6IG51bGwsCiAgICAgICAgbWVzc2FnZTogJ+iOt+WPluWOhuWPsuS4iueahOS7iuWkqeWksei0pScsCiAgICAgICAgcmVxdWVzdElkOiBudWxsCiAgICAgIH07CiAgICB9CiAgfSwKICAvLyDojrflj5bku4rml6Xml6XmnJ/kv6Hmga8KICBnZXRUb2RheURhdGVJbmZvKCkgewogICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgY29uc3QgeWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7CiAgICBjb25zdCBtb250aCA9IHRvZGF5LmdldE1vbnRoKCkgKyAxOwogICAgY29uc3QgZGF5ID0gdG9kYXkuZ2V0RGF0ZSgpOwogICAgY29uc3Qgd2Vla0RheSA9IHRvZGF5LnRvTG9jYWxlRGF0ZVN0cmluZygnemgtQ04nLCB7CiAgICAgIHdlZWtkYXk6ICdsb25nJwogICAgfSk7CiAgICByZXR1cm4gewogICAgICB5ZWFyLAogICAgICBtb250aCwKICAgICAgZGF5LAogICAgICB3ZWVrRGF5LAogICAgICBkYXRlU3RyaW5nOiBgJHttb250aH3mnIgke2RheX3ml6VgLAogICAgICBmdWxsRGF0ZVN0cmluZzogYCR7eWVhcn3lubQke21vbnRofeaciCR7ZGF5feaXpSAke3dlZWtEYXl9YAogICAgfTsKICB9LAogIC8vIOiOt+WPluWOhuWPsui2o+mXu++8iOaooeaLn+aVsOaNru+8iQogIGdldEhpc3RvcnlGYWN0cygpIHsKICAgIGNvbnN0IGZhY3RzID0gWyfku4rlpKnmmK/orqHnrpfmnLrnp5HlrabnmoTph43opoHml6XlrZAnLCAn5paH5a2m5Y+y5LiK6K+e55Sf5LqG5Lyf5aSn55qE5L2c5ZOBJywgJ+enkeaKgOmihuWfn+WPluW+l+S6humHjeWkp+eqgeegtCcsICfoibrmnK/poobln5/nlZnkuIvkuobnj43otLXpgZfkuqcnLCAn5Y6G5Y+y5LqL5Lu25pS55Y+Y5LqG5LiW55WM6L+b56iLJ107CiAgICBjb25zdCByYW5kb21GYWN0ID0gZmFjdHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZmFjdHMubGVuZ3RoKV07CiAgICByZXR1cm4gcmFuZG9tRmFjdDsKICB9LAogIC8vIOiOt+WPluaooeaLn+WOhuWPsuaVsOaNru+8iOmZjee6p+aWueahiO+8iQogIGdldE1vY2tEYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3VjY2VzczogdHJ1ZSwKICAgICAgaW1hZ2VVcmw6ICdodHRwczovL2Nkbi54eGh6bS5jbi92MmFwaS9jYWNoZS9oaXN0b3J5LzIwMjQtMTItMjYuanBnJywKICAgICAgbWVzc2FnZTogJ+WOhuWPsuS4iueahOS7iuWkqScsCiAgICAgIHJlcXVlc3RJZDogJ21vY2tfJyArIERhdGUubm93KCkKICAgIH07CiAgfQp9Ow=="},{"version":3,"names":["axios","API_BASE_URL","historyService","getTodayInHistory","response","get","data","code","success","imageUrl","message","msg","requestId","request_id","console","error","getTodayInHistoryRedirect","maxRedirects","validateStatus","status","headers","location","Error","getTodayDateInfo","today","Date","year","getFullYear","month","getMonth","day","getDate","weekDay","toLocaleDateString","weekday","dateString","fullDateString","getHistoryFacts","facts","randomFact","Math","floor","random","length","getMockData","now"],"sources":["D:/桌面文件/大三上软工项目实现/实训/study_room/code/client_home/src/services/historyService.js"],"sourcesContent":["import axios from 'axios'\n\nconst API_BASE_URL = 'https://v2.xxapi.cn/api/historypic'\n\nexport const historyService = {\n  // 获取历史上的今天图片\n  async getTodayInHistory() {\n    try {\n      const response = await axios.get(API_BASE_URL)\n      \n      if (response.data.code === 200) {\n        return {\n          success: true,\n          imageUrl: response.data.data,\n          message: response.data.msg,\n          requestId: response.data.request_id\n        }\n      } else {\n        console.error('历史上的今天API返回错误:', response.data.msg)\n        return {\n          success: false,\n          imageUrl: null,\n          message: response.data.msg || '获取历史上的今天失败',\n          requestId: response.data.request_id\n        }\n      }\n    } catch (error) {\n      console.error('获取历史上的今天失败:', error)\n      return {\n        success: false,\n        imageUrl: null,\n        message: '网络错误，请稍后重试',\n        requestId: null\n      }\n    }\n  },\n\n  // 获取历史上的今天图片（直接跳转模式）\n  async getTodayInHistoryRedirect() {\n    try {\n      const response = await axios.get(`${API_BASE_URL}?return=302`, {\n        maxRedirects: 0,\n        validateStatus: function (status) {\n          return status === 302\n        }\n      })\n      \n      if (response.status === 302 && response.headers.location) {\n        return {\n          success: true,\n          imageUrl: response.headers.location,\n          message: '获取成功',\n          requestId: null\n        }\n      } else {\n        throw new Error('未获取到重定向地址')\n      }\n    } catch (error) {\n      console.error('获取历史上的今天重定向失败:', error)\n      return {\n        success: false,\n        imageUrl: null,\n        message: '获取历史上的今天失败',\n        requestId: null\n      }\n    }\n  },\n\n  // 获取今日日期信息\n  getTodayDateInfo() {\n    const today = new Date()\n    const year = today.getFullYear()\n    const month = today.getMonth() + 1\n    const day = today.getDate()\n    const weekDay = today.toLocaleDateString('zh-CN', { weekday: 'long' })\n    \n    return {\n      year,\n      month,\n      day,\n      weekDay,\n      dateString: `${month}月${day}日`,\n      fullDateString: `${year}年${month}月${day}日 ${weekDay}`\n    }\n  },\n\n  // 获取历史趣闻（模拟数据）\n  getHistoryFacts() {\n    const facts = [\n      '今天是计算机科学的重要日子',\n      '文学史上诞生了伟大的作品',\n      '科技领域取得了重大突破',\n      '艺术领域留下了珍贵遗产',\n      '历史事件改变了世界进程'\n    ]\n    \n    const randomFact = facts[Math.floor(Math.random() * facts.length)]\n    return randomFact\n  },\n\n  // 获取模拟历史数据（降级方案）\n  getMockData() {\n    return {\n      success: true,\n      imageUrl: 'https://cdn.xxhzm.cn/v2api/cache/history/2024-12-26.jpg',\n      message: '历史上的今天',\n      requestId: 'mock_' + Date.now()\n    }\n  }\n}"],"mappings":"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","ignoreList":[]}]}