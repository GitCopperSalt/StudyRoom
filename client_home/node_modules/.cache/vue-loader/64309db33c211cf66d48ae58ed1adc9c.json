{"remainingRequest":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\src\\components\\diy\\history_widget.vue?vue&type=style&index=0&id=03d9583a&scoped=true&lang=css","dependencies":[{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\src\\components\\diy\\history_widget.vue","mtime":1766723264104},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\css-loader\\dist\\cjs.js","mtime":1766388187026},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1766388189198},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\postcss-loader\\src\\index.js","mtime":1766388187744},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766388186406},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":1766388188316}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5oaXN0b3J5LXdpZGdldCB7CgliYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwoJYm9yZGVyLXJhZGl1czogOHB4OwoJcGFkZGluZzogMXJlbTsKCWNvbG9yOiAjMzMzOwoJYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwwLDAsMC4wOCk7CgltYXJnaW4tdG9wOiAxcmVtOwp9CgouaGlzdG9yeS1oZWFkZXIgewoJZGlzcGxheTogZmxleDsKCWp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKCWFsaWduLWl0ZW1zOiBjZW50ZXI7CgltYXJnaW4tYm90dG9tOiAxcmVtOwoJcGFkZGluZy1ib3R0b206IDAuNXJlbTsKCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTllY2VmOwp9CgouaGlzdG9yeS10aXRsZSB7CgltYXJnaW46IDA7Cglmb250LXdlaWdodDogNjAwOwoJY29sb3I6ICMzMzM7CglkaXNwbGF5OiBmbGV4OwoJYWxpZ24taXRlbXM6IGNlbnRlcjsKfQoKLmhpc3RvcnktZGF0ZSB7Cglmb250LXNpemU6IDAuODVyZW07Cgljb2xvcjogIzY2NjsKCWZvbnQtd2VpZ2h0OiA1MDA7Cn0KCi8qIOWOhuWPsuaWh+Wtl+S6i+S7tumDqOWIhiAqLwouaGlzdG9yeS10ZXh0LXNlY3Rpb24gewoJbWFyZ2luLWJvdHRvbTogMXJlbTsKfQoKLmhpc3RvcnktZXZlbnQgewoJcGFkZGluZzogMXJlbTsKCWJhY2tncm91bmQ6ICNmOGY5ZmE7Cglib3JkZXItcmFkaXVzOiA4cHg7Cglib3JkZXItbGVmdDogM3B4IHNvbGlkICMwMDdiZmY7Cn0KCi5ldmVudC15ZWFyIHsKCWZvbnQtc2l6ZTogMC44NXJlbTsKCWNvbG9yOiAjMDA3YmZmOwoJZm9udC13ZWlnaHQ6IDYwMDsKCW1hcmdpbi1ib3R0b206IDAuNXJlbTsKfQoKLmV2ZW50LXRpdGxlIHsKCWZvbnQtc2l6ZTogMC45NXJlbTsKCWNvbG9yOiAjMzMzOwoJbGluZS1oZWlnaHQ6IDEuNDsKCWZvbnQtd2VpZ2h0OiA1MDA7Cn0KCi8qIOWOhuWPsuWbvueJh+mDqOWIhiAqLwouaGlzdG9yeS1pbWFnZS1zZWN0aW9uIHsKCW1hcmdpbi10b3A6IDFyZW07Cn0KCi5zZWN0aW9uLXRpdGxlIHsKCWZvbnQtc2l6ZTogMC44NXJlbTsKCWNvbG9yOiAjNjY2OwoJbWFyZ2luLWJvdHRvbTogMC42cmVtOwoJZm9udC13ZWlnaHQ6IDYwMDsKfQoKLmhpc3RvcnktaW1hZ2UtY29udGFpbmVyIHsKCXBvc2l0aW9uOiByZWxhdGl2ZTsKCWJvcmRlci1yYWRpdXM6IDhweDsKCW92ZXJmbG93OiBoaWRkZW47Cglib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLDAsMCwwLjA4KTsKfQoKLmhpc3RvcnktaW1hZ2Utd3JhcHBlciB7Cglwb3NpdGlvbjogcmVsYXRpdmU7CgljdXJzb3I6IHBvaW50ZXI7Cgl0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcyBlYXNlOwp9CgouaGlzdG9yeS1pbWFnZS13cmFwcGVyOmhvdmVyIHsKCXRyYW5zZm9ybTogc2NhbGUoMS4wMik7Cn0KCi5oaXN0b3J5LWltYWdlIHsKCXdpZHRoOiAxMDAlOwoJaGVpZ2h0OiAxODBweDsKCW9iamVjdC1maXQ6IGNvdmVyOwoJZGlzcGxheTogYmxvY2s7Cn0KCi5pbWFnZS1vdmVybGF5IHsKCXBvc2l0aW9uOiBhYnNvbHV0ZTsKCXRvcDogMDsKCWxlZnQ6IDA7CglyaWdodDogMDsKCWJvdHRvbTogMDsKCWJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC40KTsKCWRpc3BsYXk6IGZsZXg7CglmbGV4LWRpcmVjdGlvbjogY29sdW1uOwoJanVzdGlmeS1jb250ZW50OiBjZW50ZXI7CglhbGlnbi1pdGVtczogY2VudGVyOwoJb3BhY2l0eTogMDsKCXRyYW5zaXRpb246IG9wYWNpdHkgMC4zcyBlYXNlOwoJY29sb3I6IHdoaXRlOwp9CgouaGlzdG9yeS1pbWFnZS13cmFwcGVyOmhvdmVyIC5pbWFnZS1vdmVybGF5IHsKCW9wYWNpdHk6IDE7Cn0KCi5vdmVybGF5LWljb24gewoJZm9udC1zaXplOiAxLjhyZW07CgltYXJnaW4tYm90dG9tOiAwLjVyZW07Cn0KCi5vdmVybGF5LXRleHQgewoJZm9udC1zaXplOiAwLjg1cmVtOwoJZm9udC13ZWlnaHQ6IDUwMDsKfQoKLyog5Yqg6L295ZKM6ZSZ6K+v54q25oCBICovCi5sb2FkaW5nLXRleHQsIC5sb2FkaW5nLWltYWdlLCAuZXJyb3ItdGV4dCwgLmVycm9yLWltYWdlIHsKCXRleHQtYWxpZ246IGNlbnRlcjsKCXBhZGRpbmc6IDFyZW07Cgljb2xvcjogIzY2NjsKfQoKLmxvYWRpbmctdGV4dCwgLmxvYWRpbmctaW1hZ2UgewoJZGlzcGxheTogZmxleDsKCWFsaWduLWl0ZW1zOiBjZW50ZXI7CglqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKfQoKLm1vZGFsLWltYWdlIHsKCXdpZHRoOiAxMDAlOwoJbWF4LWhlaWdodDogNzB2aDsKCW9iamVjdC1maXQ6IGNvbnRhaW47Cglib3JkZXItcmFkaXVzOiA4cHg7Cn0KCi8qIOWTjeW6lOW8j+iuvuiuoSAqLwpAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHsKCS5oaXN0b3J5LXdpZGdldCB7CgkJcGFkZGluZzogMC44cmVtOwoJfQoKCS5oaXN0b3J5LWhlYWRlciB7CgkJZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKCQlhbGlnbi1pdGVtczogZmxleC1zdGFydDsKCQlnYXA6IDAuNXJlbTsKCX0KCgkuaGlzdG9yeS1ldmVudCB7CgkJcGFkZGluZzogMC44cmVtOwoJfQoKCS5ldmVudC10aXRsZSB7CgkJZm9udC1zaXplOiAwLjk1cmVtOwoJfQoKCS5oaXN0b3J5LWltYWdlIHsKCQloZWlnaHQ6IDE1MHB4OwoJfQp9Cg=="},{"version":3,"sources":["history_widget.vue"],"names":[],"mappings":";AAyKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"history_widget.vue","sourceRoot":"src/components/diy","sourcesContent":["<template>\n\t<div class=\"history-widget\">\n\t\t<div class=\"history-header\">\n\t\t\t<h5 class=\"history-title\">\n\t\t\t\t<b-icon icon=\"calendar3\" class=\"mr-2\"></b-icon>\n\t\t\t\t历史上的今天\n\t\t\t</h5>\n\t\t\t<div class=\"history-date\">\n\t\t\t\t{{ todayDateInfo.fullDateString }}\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- 历史文字事件 -->\n\t\t<div class=\"history-text-section\">\n\t\t\t<div v-if=\"loading.text\" class=\"loading-text\">\n\t\t\t\t<b-spinner small variant=\"primary\" label=\"Loading...\"></b-spinner>\n\t\t\t\t<span class=\"ml-2\">加载历史事件...</span>\n\t\t\t</div>\n\t\t\t<div v-else-if=\"historyTextData\" class=\"history-event\">\n\t\t\t\t<div class=\"event-year\">{{ historyTextData.year }}年</div>\n\t\t\t\t<div class=\"event-title\">{{ historyTextData.title }}</div>\n\t\t\t\t<b-button \n\t\t\t\t\tv-if=\"historyTextData.url\" \n\t\t\t\t\t@click=\"openHistoryUrl\" \n\t\t\t\t\tvariant=\"outline-primary\" \n\t\t\t\t\tsize=\"sm\" \n\t\t\t\t\tclass=\"mt-2\"\n\t\t\t\t>\n\t\t\t\t\t<b-icon icon=\"link45deg\" class=\"mr-1\"></b-icon>\n\t\t\t\t\t查看详情\n\t\t\t\t</b-button>\n\t\t\t</div>\n\t\t\t<div v-else class=\"error-text\">\n\t\t\t\t<b-alert show variant=\"warning\" class=\"mb-0 p-2\">\n\t\t\t\t\t<p class=\"mb-1 small\">无法加载历史事件</p>\n\t\t\t\t</b-alert>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- 历史图片 -->\n\t\t<div class=\"history-image-section\">\n\t\t\t<div class=\"section-title\">历史图片</div>\n\t\t\t<div v-if=\"loading.image\" class=\"loading-image\">\n\t\t\t\t<b-spinner small variant=\"primary\" label=\"Loading...\"></b-spinner>\n\t\t\t\t<span class=\"ml-2\">加载历史图片...</span>\n\t\t\t</div>\n\t\t\t<div v-else-if=\"historyImageData && historyImageData.success\" class=\"history-image-container\">\n\t\t\t\t<div class=\"history-image-wrapper\" @click=\"viewImage\">\n\t\t\t\t\t<img \n\t\t\t\t\t\t:src=\"historyImageData.imageUrl || mockImageUrl\" \n\t\t\t\t\t\t:alt=\"`历史上的今天 - ${todayDateInfo.dateString}`\"\n\t\t\t\t\t\t@error=\"handleImageError\"\n\t\t\t\t\t\tclass=\"history-image\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div class=\"image-overlay\">\n\t\t\t\t\t\t<b-icon icon=\"eye\" class=\"overlay-icon\"></b-icon>\n\t\t\t\t\t\t<span class=\"overlay-text\">点击查看大图</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-else class=\"error-image\">\n\t\t\t\t<b-alert show variant=\"warning\" class=\"mb-0 p-2\">\n\t\t\t\t\t<p class=\"mb-1 small\">无法加载历史图片</p>\n\t\t\t\t</b-alert>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- 图片查看模态框 -->\n\t\t<b-modal \n\t\t\t:id=\"modalId\" \n\t\t\ttitle=\"历史上的今天\" \n\t\t\thide-footer\n\t\t\tsize=\"lg\"\n\t\t\tcentered\n\t\t>\n\t\t\t<div class=\"text-center\">\n\t\t\t\t<img \n\t\t\t\t\t:src=\"historyImageData?.imageUrl || mockImageUrl\" \n\t\t\t\t\t:alt=\"`历史上的今天 - ${todayDateInfo.dateString}`\"\n\t\t\t\t\tclass=\"modal-image\"\n\t\t\t\t/>\n\t\t\t\t<p class=\"mt-3 text-muted\">\n\t\t\t\t\t{{ todayDateInfo.fullDateString }} • 历史图片\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</b-modal>\n\t</div>\n</template>\n\n<script>\nimport { historyService } from '@/services/historyService'\nimport { historyTextService } from '@/services/historyTextService'\n\nexport default {\n\tname: 'HistoryWidget',\n\tdata() {\n\t\treturn {\n\t\t\thistoryImageData: null,\n\t\t\thistoryTextData: null,\n\t\t\ttodayDateInfo: {},\n\t\t\tmockImageUrl: 'https://cdn.xxhzm.cn/v2api/cache/history/2025-12-26.jpg',\n\t\t\tmodalId: 'history-modal-' + Date.now(),\n\t\t\tloading: {\n\t\t\t\timage: true,\n\t\t\t\ttext: true\n\t\t\t}\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.initData()\n\t\tthis.loadHistoryData()\n\t},\n\tmethods: {\n\t\tinitData() {\n\t\t\tthis.todayDateInfo = historyTextService.getTodayDateInfo()\n\t\t},\n\n\t\tasync loadHistoryData() {\n\t\t\tawait Promise.all([\n\t\t\t\tthis.loadHistoryImage(),\n\t\t\t\tthis.loadHistoryText()\n\t\t\t])\n\t\t},\n\n\t\tasync loadHistoryImage() {\n\t\t\ttry {\n\t\t\t\tconst result = await historyService.getTodayInHistory()\n\t\t\t\tif (result.success) {\n\t\t\t\t\tthis.historyImageData = result\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('加载历史图片失败:', error)\n\t\t\t} finally {\n\t\t\t\tthis.loading.image = false\n\t\t\t}\n\t\t},\n\n\t\tasync loadHistoryText() {\n\t\t\ttry {\n\t\t\t\tconst result = await historyTextService.getTodayInHistoryText()\n\t\t\t\tif (result.success) {\n\t\t\t\t\tthis.historyTextData = result.data\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('加载历史文字失败:', error)\n\t\t\t} finally {\n\t\t\t\tthis.loading.text = false\n\t\t\t}\n\t\t},\n\n\t\tviewImage() {\n\t\t\tthis.$bvModal.show(this.modalId)\n\t\t},\n\n\t\thandleImageError(event) {\n\t\t\tconsole.warn('历史图片加载失败:', event.target.src)\n\t\t\tevent.target.src = this.mockImageUrl\n\t\t},\n\n\t\topenHistoryUrl() {\n\t\t\tif (this.historyTextData && this.historyTextData.url) {\n\t\t\t\twindow.open(this.historyTextData.url, '_blank')\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.history-widget {\n\tbackground-color: #fff;\n\tborder-radius: 8px;\n\tpadding: 1rem;\n\tcolor: #333;\n\tbox-shadow: 0 2px 8px rgba(0,0,0,0.08);\n\tmargin-top: 1rem;\n}\n\n.history-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin-bottom: 1rem;\n\tpadding-bottom: 0.5rem;\n\tborder-bottom: 1px solid #e9ecef;\n}\n\n.history-title {\n\tmargin: 0;\n\tfont-weight: 600;\n\tcolor: #333;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.history-date {\n\tfont-size: 0.85rem;\n\tcolor: #666;\n\tfont-weight: 500;\n}\n\n/* 历史文字事件部分 */\n.history-text-section {\n\tmargin-bottom: 1rem;\n}\n\n.history-event {\n\tpadding: 1rem;\n\tbackground: #f8f9fa;\n\tborder-radius: 8px;\n\tborder-left: 3px solid #007bff;\n}\n\n.event-year {\n\tfont-size: 0.85rem;\n\tcolor: #007bff;\n\tfont-weight: 600;\n\tmargin-bottom: 0.5rem;\n}\n\n.event-title {\n\tfont-size: 0.95rem;\n\tcolor: #333;\n\tline-height: 1.4;\n\tfont-weight: 500;\n}\n\n/* 历史图片部分 */\n.history-image-section {\n\tmargin-top: 1rem;\n}\n\n.section-title {\n\tfont-size: 0.85rem;\n\tcolor: #666;\n\tmargin-bottom: 0.6rem;\n\tfont-weight: 600;\n}\n\n.history-image-container {\n\tposition: relative;\n\tborder-radius: 8px;\n\toverflow: hidden;\n\tbox-shadow: 0 2px 8px rgba(0,0,0,0.08);\n}\n\n.history-image-wrapper {\n\tposition: relative;\n\tcursor: pointer;\n\ttransition: transform 0.3s ease;\n}\n\n.history-image-wrapper:hover {\n\ttransform: scale(1.02);\n}\n\n.history-image {\n\twidth: 100%;\n\theight: 180px;\n\tobject-fit: cover;\n\tdisplay: block;\n}\n\n.image-overlay {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground: rgba(0,0,0,0.4);\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\topacity: 0;\n\ttransition: opacity 0.3s ease;\n\tcolor: white;\n}\n\n.history-image-wrapper:hover .image-overlay {\n\topacity: 1;\n}\n\n.overlay-icon {\n\tfont-size: 1.8rem;\n\tmargin-bottom: 0.5rem;\n}\n\n.overlay-text {\n\tfont-size: 0.85rem;\n\tfont-weight: 500;\n}\n\n/* 加载和错误状态 */\n.loading-text, .loading-image, .error-text, .error-image {\n\ttext-align: center;\n\tpadding: 1rem;\n\tcolor: #666;\n}\n\n.loading-text, .loading-image {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.modal-image {\n\twidth: 100%;\n\tmax-height: 70vh;\n\tobject-fit: contain;\n\tborder-radius: 8px;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n\t.history-widget {\n\t\tpadding: 0.8rem;\n\t}\n\n\t.history-header {\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\tgap: 0.5rem;\n\t}\n\n\t.history-event {\n\t\tpadding: 0.8rem;\n\t}\n\n\t.event-title {\n\t\tfont-size: 0.95rem;\n\t}\n\n\t.history-image {\n\t\theight: 150px;\n\t}\n}\n</style>"]}]}