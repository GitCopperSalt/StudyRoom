{"remainingRequest":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\src\\components\\diy\\poetry_widget.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\src\\components\\diy\\poetry_widget.vue","mtime":1766811974569},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766388186406},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\babel-loader\\lib\\index.js","mtime":1766388187764},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1766388186406},{"path":"D:\\桌面文件\\大三上软工项目实现\\实训\\study_room\\code\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":1766388188316}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHBvZXRyeVNlcnZpY2UgfSBmcm9tICdAL3NlcnZpY2VzL3BvZXRyeVNlcnZpY2UnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1BvZXRyeVdpZGdldCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBvZXRyeURhdGE6IG51bGwsCiAgICAgIGxvYWRpbmc6IHRydWUKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRQb2V0cnkoKQogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgbG9hZFBvZXRyeSgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvZXRyeVNlcnZpY2UuZ2V0RGFpbHlQb2V0cnkoKQogICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcykgewogICAgICAgICAgdGhpcy5wb2V0cnlEYXRhID0gcmVzdWx0CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOWmguaenEFQSeWksei0pe+8jOS9v+eUqOWkh+eUqOaVsOaNrgogICAgICAgICAgdGhpcy5wb2V0cnlEYXRhID0gcG9ldHJ5U2VydmljZS5nZXRCYWNrdXBQb2V0cnkoKQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfliqDovb3lj6Tor5for43lpLHotKU6JywgZXJyb3IpCiAgICAgICAgdGhpcy5wb2V0cnlEYXRhID0gcG9ldHJ5U2VydmljZS5nZXRCYWNrdXBQb2V0cnkoKQogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgcmVmcmVzaFBvZXRyeSgpIHsKICAgICAgYXdhaXQgdGhpcy5sb2FkUG9ldHJ5KCkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["poetry_widget.vue"],"names":[],"mappings":";AAyCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"poetry_widget.vue","sourceRoot":"src/components/diy","sourcesContent":["<template>\n  <div class=\"poetry-widget\">\n    <div class=\"poetry-content\">\n      <div v-if=\"loading\" class=\"poetry-loading\">\n        <b-spinner small variant=\"primary\" label=\"Loading...\"></b-spinner>\n        <span class=\"ml-2\">加载中...</span>\n      </div>\n      <div v-else-if=\"poetryData && poetryData.success\" class=\"poetry-text\">\n        <div class=\"poetry-quote\">\n          <b-icon icon=\"quote\" class=\"quote-icon\"></b-icon>\n          <span class=\"poetry-content-text\">{{ poetryData.data.content }}</span>\n        </div>\n        <div class=\"poetry-actions\">\n          <b-button \n            @click=\"refreshPoetry\" \n            variant=\"outline-primary\" \n            size=\"sm\"\n            class=\"refresh-btn\"\n          >\n            <b-icon icon=\"arrow-clockwise\"></b-icon>\n            换一句\n          </b-button>\n        </div>\n      </div>\n      <div v-else class=\"poetry-error\">\n        <b-alert show variant=\"warning\" class=\"mb-0 p-2\">\n          <p class=\"mb-1 small\">无法加载古诗词</p>\n          <b-button \n            @click=\"refreshPoetry\" \n            variant=\"outline-warning\" \n            size=\"sm\"\n          >\n            重试\n          </b-button>\n        </b-alert>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { poetryService } from '@/services/poetryService'\n\nexport default {\n  name: 'PoetryWidget',\n  data() {\n    return {\n      poetryData: null,\n      loading: true\n    }\n  },\n  mounted() {\n    this.loadPoetry()\n  },\n  methods: {\n    async loadPoetry() {\n      this.loading = true\n      try {\n        const result = await poetryService.getDailyPoetry()\n        if (result.success) {\n          this.poetryData = result\n        } else {\n          // 如果API失败，使用备用数据\n          this.poetryData = poetryService.getBackupPoetry()\n        }\n      } catch (error) {\n        console.error('加载古诗词失败:', error)\n        this.poetryData = poetryService.getBackupPoetry()\n      } finally {\n        this.loading = false\n      }\n    },\n\n    async refreshPoetry() {\n      await this.loadPoetry()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.poetry-widget {\n  display: flex;\n  align-items: center;\n  min-height: 60px;\n}\n\n.poetry-content {\n  flex: 1;\n}\n\n.poetry-loading {\n  display: flex;\n  align-items: center;\n  color: #666;\n  font-size: var(--font_base);\n}\n\n.poetry-text {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 0.75rem;\n}\n\n.poetry-quote {\n  flex: 1;\n  display: flex;\n  align-items: flex-start;\n  gap: 0.5rem;\n}\n\n.quote-icon {\n  color: #007bff;\n  font-size: var(--font_base);\n  margin-top: 0.2rem;\n  flex-shrink: 0;\n}\n\n.poetry-content-text {\n  font-size: var(--font_base);\n  color: #333;\n  line-height: 1.4;\n  font-style: italic;\n}\n\n.poetry-actions {\n  display: flex;\n  gap: 0.5rem;\n  flex-shrink: 0;\n}\n\n.refresh-btn {\n  font-size: var(--font_small);\n  padding: 0.25rem 0.5rem;\n  border-radius: 8px;\n}\n\n.poetry-error {\n  text-align: center;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .poetry-text {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 0.8rem;\n  }\n\n  .poetry-content-text {\n    font-size: 0.85rem;\n  }\n\n  .poetry-actions {\n    justify-content: center;\n  }\n}\n</style>"]}]}