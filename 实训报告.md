# 自习室管理系统实训报告

## 1. 引言

### 1.1 项目背景与意义

随着城市化进程的加速和高等教育的普及，学习空间的需求日益增长。传统的图书馆、自习室资源有限，无法满足日益增长的学习需求。特别是在考试季、考研季等关键时期，自习座位供不应求的问题尤为突出。

同时，传统自习室管理方式存在诸多问题：
- 座位资源浪费：无法实时了解座位使用情况
- 管理效率低下：人工管理方式成本高、效率低
- 用户体验差：无法提前预约，到达后可能面临无座位的尴尬
- 数据统计困难：缺乏系统化的数据收集和分析工具

基于以上问题，开发一个智能化的自习室管理系统具有重要的现实意义。该系统能够：
- 提高座位利用率，减少资源浪费
- 提升用户体验，实现线上预约、签到、签退
- 降低管理成本，实现智能化管理
- 为管理者提供数据支持，优化资源配置

### 1.2 项目目标与范围

#### 1.2.1 项目目标

开发一个功能完善、用户体验良好的自习室管理系统，实现以下目标：

**功能目标：**
- 实现自习室信息的在线管理和展示
- 提供便捷的预约、签到、签退功能
- 建立完善的权限管理体系
- 提供数据统计和分析功能
- 确保系统的稳定性和安全性

**性能目标：**
- 支持并发用户数 ≥ 1000
- 系统响应时间 ≤ 3秒
- 数据准确率 ≥ 99.9%
- 系统可用性 ≥ 99.5%

**用户体验目标：**
- 界面简洁美观，操作直观易懂
- 支持多终端访问（PC端、移动端）
- 提供良好的交互反馈

#### 1.2.2 项目范围

**包含功能：**
- 用户管理：注册、登录、权限管理
- 自习室管理：信息维护、座位管理、状态监控
- 预约管理：在线预约、取消预约、预约查询
- 签到管理：扫码签到、签退、时长计算
- 支付管理：费用计算、支付记录
- 统计报表：使用统计、收益分析、报表导出

**不包含功能：**
- 复杂的社交功能
- 在线支付集成（预留接口）
- 移动端APP开发（当前仅支持Web端）

### 1.3 技术选型与架构

#### 1.3.1 技术选型

**前端技术栈：**
- **框架：** Vue.js 2.6
- **UI组件库：** Element UI 2.15（管理端）、BootstrapVue 2.21（用户端）
- **状态管理：** Vuex 3.4
- **路由管理：** Vue Router 3.2
- **HTTP客户端：** Axios 0.21
- **构建工具：** Vue CLI 4.5

**后端技术栈：**
- **开发框架：** Spring Boot
- **开发语言：** Java
- **数据访问：** Spring Data JPA
- **数据库：** MySQL（预期）
- **安全框架：** Spring Security（预期）
- **API文档：** Swagger（预期）

**开发工具：**
- **IDE：** IntelliJ IDEA、WebStorm
- **版本控制：** Git
- **项目管理：** Maven
- **API测试：** Postman

#### 1.3.2 系统架构设计

**总体架构：**
采用前后端分离的B/S架构模式，系统分为三个层次：

1. **表示层（Presentation Layer）**
   - 管理端：admin管理系统界面
   - 用户端：用户访问界面

2. **业务逻辑层（Business Logic Layer）**
   - 用户管理模块
   - 自习室管理模块
   - 预约管理模块
   - 签到管理模块
   - 统计报表模块

3. **数据访问层（Data Access Layer）**
   - 实体类（Entity）
   - 数据访问对象（DAO）
   - 服务层（Service）

**架构特点：**
- 模块化设计，各模块相对独立
- RESTful API设计，标准化的接口规范
- 响应式设计，支持多终端访问
- 安全认证机制，保证系统安全

### 1.4 开发计划与实施

#### 1.4.1 开发阶段规划

**第一阶段：需求分析与设计（第1-2周）**
- 完成需求调研和分析
- 完成系统架构设计
- 完成数据库设计
- 完成接口设计
- 完成UI原型设计

**第二阶段：核心功能开发（第3-6周）**
- 用户管理模块开发
- 自习室信息管理模块开发
- 基础预约功能开发
- 用户认证与权限管理

**第三阶段：功能完善与集成（第7-9周）**
- 签到系统模块开发
- 统计报表模块开发
- 前后端集成测试
- 界面优化与用户体验提升

**第四阶段：测试与优化（第10-12周）**
- 功能测试与修复
- 性能测试与优化
- 用户体验测试
- 项目文档整理

#### 1.4.2 实施过程

**项目启动：**
- 组建开发团队，明确角色分工
- 制定开发规范和代码标准
- 搭建开发环境和项目结构

**开发执行：**
- 采用敏捷开发模式，迭代式开发
- 每周进行代码审查和进度汇报
- 及时解决开发过程中的技术难点

**质量控制：**
- 建立代码review机制
- 进行单元测试和集成测试
- 持续集成和部署

### 1.5 报告结构

本报告共分为7个章节，全面展示了自习室管理系统的开发过程和成果：

1. **引言部分**：介绍项目背景、目标、技术选型等宏观内容
2. **需求分析与系统设计**：详细阐述业务需求和系统设计过程
3. **开发环境与工具配置**：说明开发环境搭建和工具配置
4. **系统实现过程**：详细描述各功能模块的实现过程
5. **系统测试与性能优化**：介绍测试策略和优化方案
6. **项目成果展示**：展示系统功能和核心代码
7. **开发总结与体会**：总结项目经验和技术收获

## 2. 需求分析与系统设计

### 2.1 业务需求分析

#### 2.1.1 业务流程分析

**自习室管理业务流程：**
1. 管理员创建自习室信息，设置基本信息、座位数量、价格等
2. 用户浏览自习室信息，选择合适的自习室和时段
3. 用户进行在线预约，选择座位和使用时长
4. 用户按时到达自习室进行签到
5. 用户使用完毕后进行签退
6. 系统自动计算费用并记录使用时长
7. 管理员可以查看各类统计报表

**主要业务流程图：**
```
用户注册/登录 → 浏览自习室 → 选择预约时段 → 确认预约 → 到店签到 → 使用座位 → 签退离开 → 费用结算
```

#### 2.1.2 用户角色分析

**系统用户分为三类：**

1. **系统管理员**
   - 拥有系统最高权限
   - 负责用户管理、自习室信息审核
   - 查看系统统计报表
   - 进行系统配置和维护

2. **自习室管理员**
   - 管理特定自习室的日常运营
   - 查看预约信息和签到记录
   - 处理用户投诉和建议
   - 更新自习室状态信息

3. **普通用户**
   - 注册登录系统
   - 浏览和搜索自习室信息
   - 进行预约、签到、签退操作
   - 查看个人预约历史
   - 进行费用支付

#### 2.1.3 业务规则分析

**预约规则：**
- 用户可提前7天进行预约
- 每次预约最少1小时，最长8小时
- 同一时间段同一用户只能预约一个座位
- 预约后15分钟内未签到自动取消

**签到规则：**
- 用户需在预约时间段开始前15分钟内签到
- 支持扫码签到或手动签到
- 签到后30分钟内未使用将自动释放座位

**费用规则：**
- 按小时计费，不足1小时按1小时计算
- 不同类型自习室价格不同
- 支持会员折扣和促销活动

### 2.2 功能需求分析

#### 2.2.1 用户管理功能

**用户注册与登录：**
- 手机号/邮箱注册
- 密码强度验证
- 短信/邮箱验证码验证
- 第三方登录集成（预留）

**用户信息管理：**
- 个人信息维护
- 头像上传
- 密码修改
- 账户安全设置

**权限管理：**
- 基于角色的访问控制（RBAC）
- 功能权限分配
- 数据权限控制
- 权限继承机制

#### 2.2.2 自习室管理功能

**自习室信息管理：**
- 自习室基本信息维护
- 座位信息管理
- 营业时间设置
- 价格策略配置
- 图片和介绍管理

**座位管理：**
- 座位状态实时监控
- 座位预订状态管理
- 座位故障报修
- 座位使用统计

**自习室分类：**
- 按类型分类：付费自习室、免费自习室
- 按区域分类：按地理位置分组
- 按设施分类：安静区、讨论区等

#### 2.2.3 预约系统功能

**在线预约：**
- 实时座位查询
- 时段选择和预订
- 预约信息确认
- 预约成功通知

**预约管理：**
- 预约历史查询
- 预约取消操作
- 预约状态变更
- 批量预约操作

**预约规则：**
- 预约时间限制
- 座位数量限制
- 取消预约规则
- 违约处理机制

#### 2.2.4 签到系统功能

**签到方式：**
- 二维码扫码签到
- 手动输入签到
- 位置验证签到（预留）

**签到管理：**
- 签到时间记录
- 签到状态监控
- 异常签到处理
- 签到数据统计

#### 2.2.5 统计报表功能

**使用统计：**
- 自习室使用率统计
- 高峰时段分析
- 用户行为分析
- 收入统计报表

**数据可视化：**
- 图表展示统计数据
- 趋势分析图表
- 对比分析图表
- 实时数据监控

### 2.3 系统架构设计

#### 2.3.1 整体架构

采用前后端分离的微服务架构，主要包括：

**前端架构：**
- 管理端：基于Vue.js + Element UI的单页应用
- 用户端：基于Vue.js + BootstrapVue的响应式Web应用
- 路由管理：Vue Router进行前端路由控制
- 状态管理：Vuex管理全局状态

**后端架构：**
- RESTful API架构
- 分层架构模式：Controller -> Service -> Repository
- 数据访问层：Spring Data JPA
- 安全控制：Spring Security

**数据库设计：**
- 主数据库：MySQL
- 缓存：Redis（预留）
- 文件存储：本地文件系统/云存储

#### 2.3.2 模块架构

**核心模块设计：**

1. **用户管理模块**
   - UserController：用户相关API接口
   - UserService：用户业务逻辑处理
   - UserRepository：用户数据访问层
   - User：用户实体类

2. **自习室管理模块**
   - StudyRoomInformationController：自习室信息API
   - StudyRoomInformationService：自习室业务逻辑
   - StudyRoomAdministratorService：管理员业务逻辑
   - 相关实体类：StudyRoomInformation、StudyRoomAdministrator

3. **预约管理模块**
   - ReservationInformationController：预约信息API
   - 预约业务流程处理
   - 预约状态管理

4. **签到管理模块**
   - CheckInInformationController：签到信息API
   - 签到业务逻辑处理
   - 使用时长计算

#### 2.3.3 技术架构

**前端技术架构：**
```
─┐   ┌──────────────── ┌─────────────────┐
│   管理端界面     │    │   用户端界面     │
│ (Vue+Element)   │    │ (Vue+Bootstrap) │
└─────────────────┘    └─────────────────┘
         │                       │
         └───────────┬───────────┘
                     │
         ┌─────────────────┐
         │   Vue Router    │
         │   Vuex Store    │
         └─────────────────┘
                     │
         ┌─────────────────┐
         │    Axios HTTP   │
         └─────────────────┘
                     │
         ┌─────────────────┐
         │   RESTful API   │
         └─────────────────┘
```

**后端技术架构：**
```
┌─────────────────┐
│   Controller    │ ← HTTP请求入口
└─────────────────┘
         │
┌─────────────────┐
│    Service      │ ← 业务逻辑处理
└─────────────────┘
         │
┌─────────────────┐
│  Repository     │ ← 数据访问层
└─────────────────┘
         │
┌─────────────────┐
│     Database    │ ← MySQL数据库
└─────────────────┘
```

### 2.4 数据库设计

#### 2.4.1 核心数据表设计

**用户表（user）**
```sql
- user_id: 用户ID（主键）
- username: 用户名
- password: 密码（加密）
- nickname: 昵称
- email: 邮箱
- phone: 手机号
- user_group: 用户组（管理员/自习室管理员/普通用户）
- avatar: 头像路径
- create_time: 创建时间
- update_time: 更新时间
```

**自习室信息表（study_room_information）**
```sql
- study_room_information_id: 自习室ID（主键）
- business: 商家ID（外键关联user表）
- name_of_study_room: 自习室名称
- study_room_type: 自习室类型（付费/免费）
- region: 区域
- opening_hours: 开放时间
- administrator_telephone: 管理员电话
- address: 地址
- number_of_seats: 座位数量
- seat_type: 座位类型
- spare_seats: 空余座位
- hourly_rate: 每小时价格
- self_study_room_pictures: 自习室图片
- introduction_to_self_study_room: 自习室简介
- examine_state: 审核状态
- examine_reply: 审核回复
- create_time: 创建时间
- update_time: 更新时间
```

**预约信息表（reservation_information）**
```sql
- reservation_information_id: 预约ID（主键）
- user: 用户ID（外键）
- full_name: 姓名
- contact_information: 联系方式
- name_of_study_room: 自习室名称
- study_room_type: 自习室类型
- region: 区域
- opening_hours: 开放时间
- administrator_telephone: 管理员电话
- address: 地址
- hourly_rate: 每小时价格
- seat_type: 座位类型
- appointment_period: 预约时段
- number_of_appointments: 预约人数
- service_duration: 使用时长
- cost: 费用
- create_time: 创建时间
```

**签到信息表（check_in_information）**
```sql
- check_in_information_id: 签到ID（主键）
- user: 用户ID（外键）
- full_name: 姓名
- contact_information: 联系方式
- name_of_study_room: 自习室名称
- appointment_period: 预约时段
- check_in_time: 签到时间
- check_out_time: 签退时间
- actual_usage_time: 实际使用时长
- actual_cost: 实际费用
- create_time: 创建时间
```

#### 2.4.2 数据关系设计

**主要关系：**
- 用户与自习室：多对多关系（用户可预约多个自习室）
- 用户与预约：一对多关系（一个用户有多个预约记录）
- 预约与签到：一对一关系（一个预约对应一个签到记录）
- 自习室与管理员：一对多关系（一个管理员管理多个自习室）

#### 2.4.3 数据完整性设计

**约束设计：**
- 外键约束：保证数据完整性
- 唯一约束：保证用户名、手机号等唯一性
- 检查约束：保证数据格式正确性
- 默认值：设置合理的默认值

### 2.5 接口设计

#### 2.5.1 RESTful API设计规范

**URL设计原则：**
- 使用名词而非动词
- 使用复数形式
- 层次化结构
- 统一的前缀路径

**HTTP方法使用：**
- GET：查询操作
- POST：创建操作
- PUT：更新操作（整体更新）
- PATCH：部分更新
- DELETE：删除操作

#### 2.5.2 核心接口定义

**用户管理接口：**

```
GET    /api/user/list          # 获取用户列表
GET    /api/user/get_obj       # 获取用户详情
POST   /api/user/add           # 添加用户
POST   /api/user/set           # 更新用户
POST   /api/user/del           # 删除用户
GET    /api/user/count         # 获取用户数量
```

**自习室信息接口：**

```
GET    /api/study_room_information/list    # 获取自习室列表
GET    /api/study_room_information/view    # 获取自习室详情
POST   /api/study_room_information/add     # 添加自习室
POST   /api/study_room_information/set     # 更新自习室
POST   /api/study_room_information/del     # 删除自习室
```

**预约信息接口：**

```
GET    /api/reservation_information/list    # 获取预约列表
GET    /api/reservation_information/view    # 获取预约详情
POST   /api/reservation_information/add     # 创建预约
POST   /api/reservation_information/set     # 更新预约
POST   /api/reservation_information/del     # 取消预约
```

**签到信息接口：**

```
GET    /api/check_in_information/list       # 获取签到列表
GET    /api/check_in_information/view       # 获取签到详情
POST   /api/check_in_information/add        # 签到操作
POST   /api/check_in_information/set        # 更新签到信息
```

#### 2.5.3 接口响应格式

**成功响应格式：**
```json
{
  "result": "success",
  "code": 200,
  "msg": "操作成功",
  "data": {
    // 具体数据
  }
}
```

**错误响应格式：**
```json
{
  "result": "error",
  "code": 400,
  "msg": "操作失败",
  "error": {
    "message": "详细错误信息",
    "code": "ERROR_CODE"
  }
}
```

### 2.6 界面设计

#### 2.6.1 用户体验设计原则

**设计理念：**
- 简洁明了：界面简洁，操作直观
- 一致性：保持设计风格统一
- 可用性：符合用户使用习惯
- 响应式：适配不同设备屏幕

#### 2.6.2 管理端界面设计

**主要页面：**

1. **登录页面**
   - 简洁的登录表单
   - 品牌Logo展示
   - 忘记密码链接

2. **仪表板页面**
   - 数据概览卡片
   - 统计图表展示
   - 快捷操作入口

3. **自习室管理页面**
   - 自习室列表展示
   - 添加/编辑自习室表单
   - 筛选和搜索功能

4. **预约管理页面**
   - 预约列表和详情
   - 预约状态管理
   - 批量操作功能

#### 2.6.3 用户端界面设计

**主要页面：**

1. **首页**
   - 轮播图展示
   - 热门自习室推荐
   - 快速预约入口

2. **自习室列表页**
   - 自习室卡片展示
   - 筛选和排序功能
   - 地图展示（预留）

3. **自习室详情页**
   - 详细信息展示
   - 图片轮播
   - 立即预约按钮

4. **个人中心页面**
   - 个人信息管理
   - 预约历史
   - 签到记录

#### 2.6.4 响应式设计

**断点设置：**
- 超小屏幕：< 576px（手机）
- 小屏幕：576px - 768px（平板）
- 中等屏幕：768px - 992px（小型桌面）
- 大屏幕：> 992px（大型桌面）

**适配策略：**
- 移动端优先设计
- 弹性网格布局
- 图片自适应缩放
- 触摸友好的交互元素

## 3. 开发环境与工具配置

### 3.1 开发环境搭建

#### 3.1.1 硬件环境要求

**开发机器配置：**
- CPU：Intel i5或AMD同等性能以上
- 内存：8GB RAM以上
- 硬盘：SSD硬盘，100GB可用空间
- 操作系统：Windows 10/11、macOS、Ubuntu 18.04+

**服务器环境（部署）：**
- CPU：Intel Xeon或同等性能以上
- 内存：16GB RAM以上
- 硬盘：500GB SSD以上
- 网络：10Mbps以上带宽

#### 3.1.2 软件环境搭建

**JDK环境配置：**
```bash
# 下载并安装JDK 8或JDK 11
# 配置环境变量
JAVA_HOME=C:\Program Files\Java\jdk1.8.0_291
PATH=%JAVA_HOME%\bin
```

**Node.js环境配置：**
```bash
# 下载并安装Node.js 14.x
# 验证安装
node --version
npm --version
```

**MySQL数据库安装：**
```bash
# 安装MySQL 8.0
# 创建数据库
CREATE DATABASE study_room_system;
# 创建用户并授权
CREATE USER 'study_room'@'localhost' IDENTIFIED BY 'password123';
GRANT ALL PRIVILEGES ON study_room_system.* TO 'study_room'@'localhost';
```

#### 3.1.3 开发工具安装

**IDEA配置：**
- 安装IntelliJ IDEA Ultimate Edition
- 安装Vue.js插件
- 配置代码格式化规则
- 设置代码模板

**WebStorm配置：**
- 安装WebStorm
- 安装Vue.js插件
- 配置ESLint和Prettier
- 设置代码风格

**Git配置：**
```bash
# 配置Git用户信息
git config --global user.name "Developer Name"
git config --global user.email "developer@example.com"

# 设置默认分支为main
git config --global init.defaultBranch main
```

### 3.2 技术栈配置

#### 3.2.1 前端技术栈配置

**Vue.js项目初始化：**
```bash
# 安装Vue CLI
npm install -g @vue/cli

# 创建管理端项目
vue create client_admin
cd client_admin
npm install

# 创建用户端项目
vue create client_home
cd client_home
npm install
```

**管理端依赖配置（package.json关键部分）：**
```json
{
  "dependencies": {
    "axios": "^0.21.1",
    "core-js": "^3.6.5",
    "element-ui": "^2.15.0",
    "jquery": "^3.5.1",
    "vue": "^2.6.11",
    "vue-router": "^3.2.0",
    "vuex": "^3.4.0"
  },
  "devDependencies": {
    "@vue/cli-service": "~4.5.0",
    "vue-template-compiler": "^2.6.11"
  }
}
```

**用户端依赖配置（package.json关键部分）：**
```json
{
  "dependencies": {
    "axios": "^0.21.1",
    "bootstrap-vue": "^2.21.2",
    "element-ui": "^2.15.0",
    "vue": "^2.6.11",
    "vue-router": "^3.2.0",
    "vuex": "^3.4.0"
  },
  "devDependencies": {
    "less": "^3.0.4",
    "less-loader": "^5.0.0",
    "vue-template-compiler": "^2.6.11"
  }
}
```

#### 3.2.2 后端技术栈配置

**Spring Boot项目配置：**

主要依赖（pom.xml关键部分）：
```xml
<dependencies>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-data-jpa</artifactId>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
    </dependency>
    <dependency>
        <groupId>org.projectlombok</groupId>
        <artifactId>lombok</artifactId>
    </dependency>
</dependencies>
```

**数据库配置（application.yml）：**
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/study_room_system
    username: study_room
    password: password123
    driver-class-name: com.mysql.cj.jdbc.Driver
  
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
```

#### 3.2.3 开发工具链配置

**ESLint配置（.eslintrc.js）：**
```javascript
module.exports = {
  root: true,
  env: {
    node: true
  },
  extends: [
    'plugin:vue/essential',
    'eslint:recommended'
  ],
  rules: {
    'no-console': process.env.NODE_ENV === 'production' ? 'warn' : 'off',
    'no-debugger': process.env.NODE_ENV === 'production' ? 'warn' : 'off'
  }
}
```

**Prettier配置（.prettierrc）：**
```json
{
  "semi": false,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5"
}
```

### 3.3 开发工具选择

#### 3.3.1 IDE选择

**IntelliJ IDEA：**
- 强大的Java开发支持
- 丰富的插件生态
- 优秀的代码智能提示
- 集成的版本控制

**WebStorm：**
- 专业的Web开发IDE
- 优秀的Vue.js支持
- 实时的代码检查
- 内置终端和Git工具

#### 3.3.2 辅助工具

**API测试工具：**
- Postman：API接口测试
- Insomnia：轻量级API测试工具
- Swagger：API文档生成

**数据库管理工具：**
- MySQL Workbench：MySQL官方工具
- Navicat：图形化数据库管理
- DBeaver：开源数据库工具

**版本控制工具：**
- Git：分布式版本控制
- GitHub：代码托管平台
- GitLab：企业级Git仓库

**项目管理工具：**
- Trello：看板式项目管理
- Jira：专业项目管理工具
- 腾讯会议：团队沟通工具

#### 3.3.3 部署工具

**构建工具：**
- Maven：Java项目构建
- npm：Node.js包管理
- webpack：前端模块打包

**容器化工具：**
- Docker：应用容器化
- Docker Compose：多容器编排

### 3.4 项目结构设计

#### 3.4.1 前端项目结构

**管理端项目结构（client_admin）：**
```
client_admin/
├── public/                 # 静态资源
│   ├── css/               # 样式文件
│   ├── img/               # 图片资源
│   └── index.html         # HTML模板
├── src/                   # 源代码
│   ├── assets/            # 资源文件
│   │   ├── images/        # 图片资源
│   │   ├── js/            # 第三方JS库
│   │   └── style/         # 样式文件
│   ├── components/        # 公共组件
│   │   ├── charts/        # 图表组件
│   │   ├── common/        # 通用组件
│   │   └── diy/           # 自定义组件
│   ├── html/              # HTML模板
│   ├── mixins/            # 混入
│   ├── plugins/           # 插件
│   ├── router/            # 路由配置
│   ├── store/             # Vuex状态管理
│   ├── views/             # 页面组件
│   │   ├── article/       # 文章管理
│   │   ├── auth/          # 权限管理
│   │   ├── check_in_information/  # 签到信息
│   │   ├── reservation_information/  # 预约信息
│   │   ├── study_room_information/   # 自习室信息
│   │   └── user/          # 用户管理
│   ├── App.vue            # 根组件
│   └── main.js            # 入口文件
├── .browserslistrc        # 浏览器支持配置
├── babel.config.js        # Babel配置
└── package.json           # 项目配置
```

**用户端项目结构（client_home）：**
```
client_home/
├── public/                # 静态资源
│   ├── css/               # 样式文件
│   ├── img/               # 图片资源
│   └── favicon.ico        # 网站图标
├── src/                   # 源代码
│   ├── assets/            # 资源文件
│   ├── components/        # 公共组件
│   │   └── diy/           # 自定义组件
│   ├── views/             # 页面组件
│   │   ├── reservation_information/  # 预约相关
│   │   └── search/        # 搜索功能
│   ├── App.vue            # 根组件
│   └── main.js            # 入口文件
├── babel.config.js        # Babel配置
└── package.json           # 项目配置
```

#### 3.4.2 后端项目结构

**Spring Boot项目结构（server）：**
```
server/
├── src/
│   └── main/
│       ├── java/
│       │   └── com/
│       │       └── project/
│       │           └── demo/
│       │               ├── DemoApplication.java    # 启动类
│       │               ├── config/                 # 配置类
│       │               ├── controller/             # 控制层
│       │               │   ├── UserController.java
│       │               │   ├── StudyRoomInformationController.java
│       │               │   ├── ReservationInformationController.java
│       │               │   └── CheckInInformationController.java
│       │               ├── service/                # 服务层
│       │               │   ├── UserService.java
│       │               │   ├── StudyRoomInformationService.java
│       │               │   ├── StudyRoomAdministratorService.java
│       │               │   └── base/
│       │               │       └── BaseService.java
│       │               ├── entity/                 # 实体类
│       │               │   ├── User.java
│       │               │   ├── StudyRoomInformation.java
│       │               │   ├── StudyRoomAdministrator.java
│       │               │   ├── ReservationInformation.java
│       │               │   ├── CheckInInformation.java
│       │               │   └── base/
│       │               │       └── BaseEntity.java
│       │               └── repository/             # 数据访问层
│       └── resources/
│           ├── application.yml    # 应用配置
│           └── static/            # 静态资源
└── pom.xml                    # Maven配置
```

#### 3.4.3 模块划分原则

**前端模块划分：**
- 按功能模块划分：用户管理、自习室管理、预约管理等
- 按组件类型划分：通用组件、页面组件、图表组件
- 按页面层次划分：布局组件、页面组件、局部组件

**后端模块划分：**
- 按分层架构划分：Controller、Service、Repository
- 按业务模块划分：用户模块、自习室模块、预约模块
- 按技术层面划分：配置类、工具类、实体类

**代码组织原则：**
- 高内聚低耦合
- 单一职责原则
- 开闭原则
- 依赖倒置原则

## 4. 系统实现过程

### 4.1 总体实现方案

#### 4.1.1 实现策略

**开发模式选择：**
采用前后端分离的开发模式，前端负责界面展示和用户交互，后端负责业务逻辑和数据处理。通过RESTful API进行前后端通信。

**技术实现方案：**
- 前端：Vue.js单页应用，响应式设计
- 后端：Spring Boot微服务架构
- 数据库：MySQL关系型数据库
- 接口：RESTful API风格

#### 4.1.2 开发流程

**需求转化为功能模块：**
1. 业务需求分析 → 功能模块设计
2. 功能模块设计 → 数据库设计
3. 数据库设计 → 接口设计
4. 接口设计 → 前后端开发

**开发迭代过程：**
1. 创建基础框架和项目结构
2. 实现用户认证和权限管理
3. 开发核心业务功能模块
4. 前后端集成和接口调试
5. 界面优化和用户体验提升

#### 4.1.3 关键技术点

**前端实现要点：**
- 组件化开发，提高代码复用性
- 响应式布局，适配多种设备
- 状态管理，统一数据流
- 路由守卫，保证页面访问安全

**后端实现要点：**
- 分层架构，降低系统复杂度
- 事务管理，保证数据一致性
- 异常处理，统一错误处理
- 性能优化，提高响应速度

### 4.2 后端核心功能实现

#### 4.2.1 用户认证与权限管理模块

**用户实体类实现：**

在 `server/src/main/java/com/project/demo/entity/User.java` 中：

```java
@Entity(name = "User")
@Table(name = "user")
public class User implements Serializable {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "user_id")
    private Integer userId;
    
    @Basic
    private String username;
    
    @Basic
    private String password;
    
    @Basic
    private String nickname;
    
    @Basic
    private String email;
    
    @Basic
    private String phone;
    
    @Basic
    private String user_group;
    
    @Basic
    private String avatar;
    
    @Basic
    private Timestamp create_time;
    
    @Basic
    private Timestamp update_time;
    
    // getters and setters
}
```

**用户服务层实现：**

在 `server/src/main/java/com/project/demo/service/UserService.java` 中：

```java
@Service
public class UserService extends BaseService<User> {
    
    /**
     * 用户登录验证
     */
    public User login(String username, String password) {
        Map<String, Object> params = new HashMap<>();
        params.put("username", username);
        params.put("password", password);
        
        List<User> users = this.getList(params, null);
        if (!users.isEmpty()) {
            return users.get(0);
        }
        return null;
    }
    
    /**
     * 用户注册
     */
    public User register(User user) {
        // 密码加密处理
        user.setPassword(encodePassword(user.getPassword()));
        return this.save(user);
    }
    
    /**
     * 根据用户组查询用户
     */
    public List<User> getUsersByGroup(String userGroup) {
        Map<String, Object> params = new HashMap<>();
        params.put("user_group", userGroup);
        return this.getList(params, null);
    }
}
```

**用户控制器实现：**

在 `server/src/main/java/com/project/demo/controller/UserController.java` 中：

```java
@Slf4j
@RestController
@RequestMapping("user")
public class UserController extends BaseController<User, UserService> {
    
    @Autowired
    public UserController(UserService service) {
        setService(service);
    }
    
    /**
     * 用户登录接口
     */
    @PostMapping("login")
    public Result login(@RequestBody Map<String, Object> map) {
        String username = (String) map.get("username");
        String password = (String) map.get("password");
        
        User user = service.login(username, password);
        if (user != null) {
            return success(user);
        } else {
            return error("用户名或密码错误");
        }
    }
    
    /**
     * 用户注册接口
     */
    @PostMapping("register")
    public Result register(@RequestBody User user) {
        try {
            User savedUser = service.register(user);
            return success(savedUser);
        } catch (Exception e) {
            log.error("用户注册失败", e);
            return error("注册失败");
        }
    }
    
    /**
     * 获取用户列表（分页）
     */
    @GetMapping("list")
    public Result getList(@RequestParam(defaultValue = "1") Integer page,
                         @RequestParam(defaultValue = "10") Integer size) {
        Map<String, Object> params = new HashMap<>();
        return success(service.getList(params, page, size));
    }
    
    /**
     * 获取用户总数
     */
    @GetMapping("count")
    public Result getCount() {
        Map<String, Object> params = new HashMap<>();
        long count = service.getCount(params);
        return success(count);
    }
}
```

#### 4.2.2 自习室管理模块

**自习室信息实体类实现：**

在 `server/src/main/java/com/project/demo/entity/StudyRoomInformation.java` 中：

```java
@Entity(name = "StudyRoomInformation")
public class StudyRoomInformation implements Serializable {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "study_room_information_id")
    private Integer studyRoomInformationId;
    
    @Basic
    private Integer business;
    
    @Basic
    private String nameOfStudyRoom;
    
    @Basic
    private String studyRoomType;
    
    @Basic
    private String region;
    
    @Basic
    private String openingHours;
    
    @Basic
    private String administratorTelephone;
    
    @Basic
    private String address;
    
    @Basic
    private String numberOfSeats;
    
    @Basic
    private String seatType;
    
    @Basic
    private Integer spareSeats;
    
    @Basic
    private String hourlyRate;
    
    @Basic
    private String selfStudyRoomPictures;
    
    @Basic
    private String introductionToSelfStudyRoom;
    
    @Basic
    private String examineState;
    
    @Basic
    private String examineReply;
    
    @Basic
    private Timestamp updateTime;
    
    @Basic
    private Timestamp createTime;
    
    // getters and setters
}
```

**自习室服务层实现：**

在 `server/src/main/java/com/project/demo/service/StudyRoomInformationService.java` 中：

```java
@Service
public class StudyRoomInformationService extends BaseService<StudyRoomInformation> {
    
    /**
     * 根据区域查询自习室
     */
    public List<StudyRoomInformation> getStudyRoomsByRegion(String region) {
        Map<String, Object> params = new HashMap<>();
        params.put("region", region);
        return this.getList(params, null);
    }
    
    /**
     * 根据类型查询自习室
     */
    public List<StudyRoomInformation> getStudyRoomsByType(String studyRoomType) {
        Map<String, Object> params = new HashMap<>();
        params.put("study_room_type", studyRoomType);
        return this.getList(params, null);
    }
    
    /**
     * 更新自习室剩余座位数
     */
    public boolean updateSpareSeats(Integer studyRoomId, Integer spareSeats) {
        StudyRoomInformation studyRoom = this.getObj(studyRoomId);
        if (studyRoom != null) {
            studyRoom.setSpareSeats(spareSeats);
            return this.set(studyRoom) != null;
        }
        return false;
    }
    
    /**
     * 获取可用的自习室（有空余座位）
     */
    public List<StudyRoomInformation> getAvailableStudyRooms() {
        Map<String, Object> params = new HashMap<>();
        params.put("spare_seats_op", ">"); // 使用自定义查询条件
        return this.getList(params, null);
    }
}
```

**自习室控制器实现：**

在 `server/src/main/java/com/project/demo/controller/StudyRoomInformationController.java` 中：

```java
@Slf4j
@RestController
@RequestMapping("study_room_information")
public class StudyRoomInformationController extends BaseController<StudyRoomInformation, StudyRoomInformationService> {
    
    @Autowired
    public StudyRoomInformationController(StudyRoomInformationService service) {
        setService(service);
    }
    
    /**
     * 获取自习室列表（支持筛选）
     */
    @GetMapping("list")
    public Result getList(@RequestParam(required = false) String region,
                         @RequestParam(required = false) String studyRoomType,
                         @RequestParam(defaultValue = "1") Integer page,
                         @RequestParam(defaultValue = "10") Integer size) {
        Map<String, Object> params = new HashMap<>();
        
        if (StringUtils.hasText(region)) {
            params.put("region", region);
        }
        if (StringUtils.hasText(studyRoomType)) {
            params.put("study_room_type", studyRoomType);
        }
        
        return success(service.getList(params, page, size));
    }
    
    /**
     * 获取自习室详情
     */
    @GetMapping("view")
    public Result getObj(@RequestParam Integer studyRoomInformationId) {
        StudyRoomInformation studyRoom = service.getObj(studyRoomInformationId);
        if (studyRoom != null) {
            return success(studyRoom);
        } else {
            return error("自习室不存在");
        }
    }
    
    /**
     * 添加自习室
     */
    @PostMapping("add")
    public Result add(@RequestBody StudyRoomInformation studyRoom) {
        try {
            // 设置初始值
            studyRoom.setSpareSeats(Integer.valueOf(studyRoom.getNumberOfSeats()));
            studyRoom.setExamineState("待审核");
            studyRoom.setCreateTime(new Timestamp(System.currentTimeMillis()));
            
            StudyRoomInformation savedStudyRoom = service.save(studyRoom);
            return success(savedStudyRoom);
        } catch (Exception e) {
            log.error("添加自习室失败", e);
            return error("添加失败");
        }
    }
    
    /**
     * 更新自习室信息
     */
    @PostMapping("set")
    public Result set(@RequestBody StudyRoomInformation studyRoom) {
        try {
            studyRoom.setUpdateTime(new Timestamp(System.currentTimeMillis()));
            StudyRoomInformation updatedStudyRoom = service.set(studyRoom);
            return success(updatedStudyRoom);
        } catch (Exception e) {
            log.error("更新自习室失败", e);
            return error("更新失败");
        }
    }
    
    /**
     * 审核自习室
     */
    @PostMapping("examine")
    public Result examine(@RequestParam Integer studyRoomInformationId,
                         @RequestParam String examineState,
                         @RequestParam(required = false) String examineReply) {
        try {
            StudyRoomInformation studyRoom = service.getObj(studyRoomInformationId);
            if (studyRoom != null) {
                studyRoom.setExamineState(examineState);
                if (StringUtils.hasText(examineReply)) {
                    studyRoom.setExamineReply(examineReply);
                }
                studyRoom.setUpdateTime(new Timestamp(System.currentTimeMillis()));
                
                StudyRoomInformation updatedStudyRoom = service.set(studyRoom);
                return success(updatedStudyRoom);
            } else {
                return error("自习室不存在");
            }
        } catch (Exception e) {
            log.error("审核自习室失败", e);
            return error("审核失败");
        }
    }
}
```

#### 4.2.3 预约系统模块

**预约信息实体类实现：**

在 `server/src/main/java/com/project/demo/entity/ReservationInformation.java` 中：

```java
@Entity(name = "ReservationInformation")
public class ReservationInformation implements Serializable {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "reservation_information_id")
    private Integer reservationInformationId;
    
    @Basic
    private Integer user;
    
    @Basic
    private String fullName;
    
    @Basic
    private String contactInformation;
    
    @Basic
    private String nameOfStudyRoom;
    
    @Basic
    private String studyRoomType;
    
    @Basic
    private String region;
    
    @Basic
    private String openingHours;
    
    @Basic
    private String administratorTelephone;
    
    @Basic
    private String address;
    
    @Basic
    private String hourlyRate;
    
    @Basic
    private String seatType;
    
    @Basic
    private String appointmentPeriod;
    
    @Basic
    private Integer numberOfAppointments;
    
    @Basic
    private Integer serviceDuration;
    
    @Basic
    private String cost;
    
    @Basic
    private Timestamp createTime;
    
    @Basic
    private Timestamp updateTime;
    
    // getters and setters
}
```

**预约服务层实现：**

在 `server/src/main/java/com/project/demo/service/ReservationInformationService.java` 中：

```java
@Service
public class ReservationInformationService extends BaseService<ReservationInformation> {
    
    @Autowired
    private StudyRoomInformationService studyRoomService;
    
    /**
     * 创建预约
     */
    public Result createReservation(ReservationInformation reservation) {
        try {
            // 检查自习室是否可用
            StudyRoomInformation studyRoom = studyRoomService.getObj(reservation.getStudyRoomInformationId());
            if (studyRoom == null) {
                return error("自习室不存在");
            }
            
            if (studyRoom.getSpareSeats() <= 0) {
                return error("自习室暂无空余座位");
            }
            
            // 检查时间段是否冲突
            if (isTimeConflict(reservation)) {
                return error("预约时间段冲突");
            }
            
            // 计算费用
            reservation.setCost(calculateCost(reservation));
            reservation.setCreateTime(new Timestamp(System.currentTimeMillis()));
            reservation.setStatus("已预约");
            
            // 保存预约信息
            ReservationInformation savedReservation = this.save(reservation);
            
            // 更新自习室剩余座位数
            studyRoomService.updateSpareSeats(studyRoom.getStudyRoomInformationId(), 
                                           studyRoom.getSpareSeats() - 1);
            
            return success(savedReservation);
        } catch (Exception e) {
            log.error("创建预约失败", e);
            return error("预约创建失败");
        }
    }
    
    /**
     * 检查时间段冲突
     */
    private boolean isTimeConflict(ReservationInformation reservation) {
        Map<String, Object> params = new HashMap<>();
        params.put("user", reservation.getUser());
        params.put("study_room_information_id", reservation.getStudyRoomInformationId());
        params.put("appointment_period", reservation.getAppointmentPeriod());
        params.put("status", "已预约");
        
        List<ReservationInformation> conflicts = this.getList(params, null);
        return !conflicts.isEmpty();
    }
    
    /**
     * 计算预约费用
     */
    private String calculateCost(ReservationInformation reservation) {
        try {
            Double hourlyRate = Double.valueOf(reservation.getHourlyRate());
            Integer duration = reservation.getServiceDuration();
            Double totalCost = hourlyRate * duration;
            return String.format("%.2f", totalCost);
        } catch (Exception e) {
            log.error("费用计算失败", e);
            return "0.00";
        }
    }
    
    /**
     * 取消预约
     */
    public Result cancelReservation(Integer reservationId) {
        try {
            ReservationInformation reservation = this.getObj(reservationId);
            if (reservation == null) {
                return error("预约记录不存在");
            }
            
            if ("已取消".equals(reservation.getStatus())) {
                return error("预约已经取消");
            }
            
            // 更新预约状态
            reservation.setStatus("已取消");
            reservation.setUpdateTime(new Timestamp(System.currentTimeMillis()));
            
            // 恢复自习室座位数
            StudyRoomInformation studyRoom = studyRoomService.getObj(reservation.getStudyRoomInformationId());
            if (studyRoom != null) {
                studyRoomService.updateSpareSeats(studyRoom.getStudyRoomInformationId(), 
                                               studyRoom.getSpareSeats() + 1);
            }
            
            this.set(reservation);
            return success("预约取消成功");
        } catch (Exception e) {
            log.error("取消预约失败", e);
            return error("取消预约失败");
        }
    }
}
```

#### 4.2.4 签到系统模块

**签到信息实体类实现：**

在 `server/src/main/java/com/project/demo/entity/CheckInInformation.java` 中：

```java
@Entity(name = "CheckInInformation")
public class CheckInInformation implements Serializable {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "check_in_information_id")
    private Integer checkInInformationId;
    
    @Basic
    private Integer user;
    
    @Basic
    private String fullName;
    
    @Basic
    private String contactInformation;
    
    @Basic
    private String nameOfStudyRoom;
    
    @Basic
    private String appointmentPeriod;
    
    @Basic
    private Timestamp checkInTime;
    
    @Basic
    private Timestamp checkOutTime;
    
    @Basic
    private Integer actualUsageTime;
    
    @Basic
    private String actualCost;
    
    @Basic
    private String status;
    
    @Basic
    private Timestamp createTime;
    
    @Basic
    private Timestamp updateTime;
    
    // getters and setters
}
```

**签到服务层实现：**

在 `server/src/main/java/com/project/demo/service/CheckInInformationService.java` 中：

```java
@Service
public class CheckInInformationService extends BaseService<CheckInInformation> {
    
    @Autowired
    private ReservationInformationService reservationService;
    
    /**
     * 用户签到
     */
    public Result checkIn(Integer reservationId) {
        try {
            ReservationInformation reservation = reservationService.getObj(reservationId);
            if (reservation == null) {
                return error("预约记录不存在");
            }
            
            if ("已签到".equals(reservation.getStatus())) {
                return error("已经签到，无需重复签到");
            }
            
            // 创建签到记录
            CheckInInformation checkIn = new CheckInInformation();
            checkIn.setUser(reservation.getUser());
            checkIn.setFullName(reservation.getFullName());
            checkIn.setContactInformation(reservation.getContactInformation());
            checkIn.setNameOfStudyRoom(reservation.getNameOfStudyRoom());
            checkIn.setAppointmentPeriod(reservation.getAppointmentPeriod());
            checkIn.setCheckInTime(new Timestamp(System.currentTimeMillis()));
            checkIn.setStatus("已签到");
            checkIn.setCreateTime(new Timestamp(System.currentTimeMillis()));
            
            // 保存签到记录
            CheckInInformation savedCheckIn = this.save(checkIn);
            
            // 更新预约状态
            reservation.setStatus("已签到");
            reservationService.set(reservation);
            
            return success(savedCheckIn);
        } catch (Exception e) {
            log.error("签到失败", e);
            return error("签到失败");
        }
    }
    
    /**
     * 用户签退
     */
    public Result checkOut(Integer checkInId) {
        try {
            CheckInInformation checkIn = this.getObj(checkInId);
            if (checkIn == null) {
                return error("签到记录不存在");
            }
            
            if ("已签退".equals(checkIn.getStatus())) {
                return error("已经签退");
            }
            
            // 计算实际使用时长和费用
            Timestamp checkInTime = checkIn.getCheckInTime();
            Timestamp checkOutTime = new Timestamp(System.currentTimeMillis());
            
            // 计算使用时长（分钟）
            long durationMinutes = (checkOutTime.getTime() - checkInTime.getTime()) / (1000 * 60);
            checkIn.setActualUsageTime((int) (durationMinutes / 60)); // 转换为小时
            
            // 计算实际费用
            checkIn.setActualCost(calculateActualCost(checkIn, durationMinutes));
            
            // 更新签退信息
            checkIn.setCheckOutTime(checkOutTime);
            checkIn.setStatus("已签退");
            checkIn.setUpdateTime(new Timestamp(System.currentTimeMillis()));
            
            this.set(checkIn);
            
            return success("签退成功");
        } catch (Exception e) {
            log.error("签退失败", e);
            return error("签退失败");
        }
    }
    
    /**
     * 计算实际费用
     */
    private String calculateActualCost(CheckInInformation checkIn, long durationMinutes) {
        try {
            // 这里需要获取预约时的价格信息
            // 简化处理，按小时计费
            Double hourlyRate = 10.0; // 默认价格
            Integer hours = (int) Math.ceil(durationMinutes / 60.0); // 向上取整
            Double actualCost = hourlyRate * hours;
            return String.format("%.2f", actualCost);
        } catch (Exception e) {
            log.error("费用计算失败", e);
            return "0.00";
        }
    }
}
```

#### 4.2.5 统计报表模块

**统计服务层实现：**

在 `server/src/main/java/com/project/demo/service/StatisticsService.java` 中：

```java
@Service
public class StatisticsService {
    
    @Autowired
    private ReservationInformationService reservationService;
    
    @Autowired
    private CheckInInformationService checkInService;
    
    @Autowired
    private StudyRoomInformationService studyRoomService;
    
    /**
     * 获取用户统计信息
     */
    public Map<String, Object> getUserStatistics() {
        Map<String, Object> statistics = new HashMap<>();
        
        // 总用户数
        long totalUsers = getTotalUserCount();
        statistics.put("totalUsers", totalUsers);
        
        // 今日新增用户
        long todayNewUsers = getTodayNewUserCount();
        statistics.put("todayNewUsers", todayNewUsers);
        
        // 用户组分布
        Map<String, Long> userGroupDistribution = getUserGroupDistribution();
        statistics.put("userGroupDistribution", userGroupDistribution);
        
        return statistics;
    }
    
    /**
     * 获取自习室统计信息
     */
    public Map<String, Object> getStudyRoomStatistics() {
        Map<String, Object> statistics = new HashMap<>();
        
        // 总自习室数
        long totalStudyRooms = getTotalStudyRoomCount();
        statistics.put("totalStudyRooms", totalStudyRooms);
        
        // 自习室类型分布
        Map<String, Long> typeDistribution = getStudyRoomTypeDistribution();
        statistics.put("typeDistribution", typeDistribution);
        
        // 区域分布
        Map<String, Long> regionDistribution = getRegionDistribution();
        statistics.put("regionDistribution", regionDistribution);
        
        return statistics;
    }
    
    /**
     * 获取预约统计信息
     */
    public Map<String, Object> getReservationStatistics() {
        Map<String, Object> statistics = new HashMap<>();
        
        // 今日预约数
        long todayReservations = getTodayReservationCount();
        statistics.put("todayReservations", todayReservations);
        
        // 本周预约数
        long weekReservations = getWeekReservationCount();
        statistics.put("weekReservations", weekReservations);
        
        // 本月预约数
        long monthReservations = getMonthReservationCount();
        statistics.put("monthReservations", monthReservations);
        
        // 预约状态分布
        Map<String, Long> statusDistribution = getReservationStatusDistribution();
        statistics.put("statusDistribution", statusDistribution);
        
        return statistics;
    }
    
    /**
     * 获取收益统计信息
     */
    public Map<String, Object> getRevenueStatistics() {
        Map<String, Object> statistics = new HashMap<>();
        
        // 今日收益
        Double todayRevenue = getTodayRevenue();
        statistics.put("todayRevenue", todayRevenue);
        
        // 本周收益
        Double weekRevenue = getWeekRevenue();
        statistics.put("weekRevenue", weekRevenue);
        
        // 本月收益
        Double monthRevenue = getMonthRevenue();
        statistics.put("monthRevenue", monthRevenue);
        
        // 自习室收益排行
        List<Map<String, Object>> topStudyRooms = getTopStudyRoomsByRevenue();
        statistics.put("topStudyRooms", topStudyRooms);
        
        return statistics;
    }
    
    /**
     * 获取时段使用统计
     */
    public Map<String, Object> getTimeSlotStatistics() {
        Map<String, Object> statistics = new HashMap<>();
        
        // 各时段使用率统计
        Map<String, Double> hourlyUsage = getHourlyUsageRate();
        statistics.put("hourlyUsage", hourlyUsage);
        
        // 周末vs工作日使用对比
        Map<String, Double> weekendVsWeekday = getWeekendVsWeekdayUsage();
        statistics.put("weekendVsWeekday", weekendVsWeekday);
        
        return statistics;
    }
}
```

### 4.3 前端界面实现

#### 4.3.1 管理端界面实现

**路由配置实现：**

在 `client_admin/src/router/index.js` 中：

```javascript
import Vue from 'vue'
import VueRouter from 'vue-router'
import store from '@/store'

Vue.use(VueRouter)

const routes = [
  {
    path: '/login',
    name: 'Login',
    component: () => import('@/views/login.vue')
  },
  {
    path: '/',
    component: () => import('@/views/index.vue'),
    meta: { requiresAuth: true }
  },
  {
    path: '/user',
    component: () => import('@/views/user/table.vue'),
    meta: { requiresAuth: true }
  },
  {
    path: '/study_room_information',
    component: () => import('@/views/study_room_information/table.vue'),
    meta: { requiresAuth: true }
  },
  {
    path: '/reservation_information',
    component: () => import('@/views/reservation_information/table.vue'),
    meta: { requiresAuth: true }
  },
  {
    path: '/check_in_information',
    component: () => import('@/views/check_in_information/table.vue'),
    meta: { requiresAuth: true }
  }
]

const router = new VueRouter({
  mode: 'history',
  base: process.env.BASE_URL,
  routes
})

// 路由守卫
router.beforeEach((to, from, next) => {
  const token = localStorage.getItem('token')
  const userGroup = localStorage.getItem('user_group')
  
  if (to.matched.some(record => record.meta.requiresAuth)) {
    if (!token || !userGroup) {
      next('/login')
    } else {
      next()
    }
  } else {
    next()
  }
})

export default router
```

**用户管理页面实现：**

在 `client_admin/src/views/user/table.vue` 中：

```vue
<template>
  <div class="user-table">
    <div class="search-bar">
      <el-form :inline="true" :model="searchForm">
        <el-form-item label="用户名">
          <el-input v-model="searchForm.username" placeholder="请输入用户名"></el-input>
        </el-form-item>
        <el-form-item label="用户组">
          <el-select v-model="searchForm.user_group" placeholder="请选择用户组">
            <el-option label="全部" value=""></el-option>
            <el-option label="管理员" value="管理员"></el-option>
            <el-option label="自习室管理员" value="自习室管理员"></el-option>
            <el-option label="普通用户" value="普通用户"></el-option>
          </el-select>
        </el-form-item>
        <el-form-item>
          <el-button type="primary" @click="handleSearch">搜索</el-button>
          <el-button @click="handleReset">重置</el-button>
        </el-form-item>
      </el-form>
    </div>
    
    <div class="table-toolbar">
      <el-button type="primary" @click="handleAdd">添加用户</el-button>
      <el-button type="danger" @click="handleBatchDelete" :disabled="selectedUsers.length === 0">
        批量删除
      </el-button>
    </div>
    
    <el-table :data="userList" @selection-change="handleSelectionChange" stripe>
      <el-table-column type="selection" width="55"></el-table-column>
      <el-table-column prop="user_id" label="ID" width="80"></el-table-column>
      <el-table-column prop="username" label="用户名"></el-table-column>
      <el-table-column prop="nickname" label="昵称"></el-table-column>
      <el-table-column prop="email" label="邮箱"></el-table-column>
      <el-table-column prop="phone" label="手机号"></el-table-column>
      <el-table-column prop="user_group" label="用户组"></el-table-column>
      <el-table-column prop="create_time" label="创建时间" width="160"></el-table-column>
      <el-table-column label="操作" width="200">
        <template slot-scope="scope">
          <el-button size="mini" @click="handleView(scope.row)">查看</el-button>
          <el-button size="mini" type="primary" @click="handleEdit(scope.row)">编辑</el-button>
          <el-button size="mini" type="danger" @click="handleDelete(scope.row)">删除</el-button>
        </template>
      </el-table-column>
    </el-table>
    
    <div class="pagination">
      <el-pagination
        @size-change="handleSizeChange"
        @current-change="handleCurrentChange"
        :current-page="pagination.currentPage"
        :page-sizes="[10, 20, 50, 100]"
        :page-size="pagination.pageSize"
        layout="total, sizes, prev, pager, next, jumper"
        :total="pagination.total">
      </el-pagination>
    </div>
  </div>
</template>

<script>
export default {
  name: 'UserTable',
  data() {
    return {
      userList: [],
      selectedUsers: [],
      searchForm: {
        username: '',
        user_group: ''
      },
      pagination: {
        currentPage: 1,
        pageSize: 10,
        total: 0
      }
    }
  },
  created() {
    this.getUserList()
  },
  methods: {
    async getUserList() {
      try {
        const params = {
          page: this.pagination.currentPage,
          size: this.pagination.pageSize,
          ...this.searchForm
        }
        
        const response = await this.$get('~/api/user/list', params)
        if (response.result) {
          this.userList = response.result.list || []
          this.pagination.total = response.result.count || 0
        }
      } catch (error) {
        console.error('获取用户列表失败', error)
        this.$message.error('获取用户列表失败')
      }
    },
    handleSearch() {
      this.pagination.currentPage = 1
      this.getUserList()
    },
    handleReset() {
      this.searchForm = {
        username: '',
        user_group: ''
      }
      this.pagination.currentPage = 1
      this.getUserList()
    },
    handleAdd() {
      this.$router.push('/user/add')
    },
    handleEdit(row) {
      this.$router.push(`/user/edit?id=${row.user_id}`)
    },
    handleView(row) {
      this.$router.push(`/user/view?id=${row.user_id}`)
    },
    handleDelete(row) {
      this.$confirm('确定要删除该用户吗？', '提示', {
        confirmButtonText: '确定',
        cancelButtonText: '取消',
        type: 'warning'
      }).then(async () => {
        try {
          await this.$get('~/api/user/del', { user_id: row.user_id })
          this.$message.success('删除成功')
          this.getUserList()
        } catch (error) {
          this.$message.error('删除失败')
        }
      })
    },
    handleSelectionChange(selection) {
      this.selectedUsers = selection
    },
    handleBatchDelete() {
      if (this.selectedUsers.length === 0) {
        this.$message.warning('请选择要删除的用户')
        return
      }
      
      this.$confirm(`确定要删除选中的 ${this.selectedUsers.length} 个用户吗？`, '提示', {
        confirmButtonText: '确定',
        cancelButtonText: '取消',
        type: 'warning'
      }).then(async () => {
        try {
          const userIds = this.selectedUsers.map(user => user.user_id)
          await this.$get('~/api/user/batch_del', { user_ids: userIds })
          this.$message.success('批量删除成功')
          this.getUserList()
        } catch (error) {
          this.$message.error('批量删除失败')
        }
      })
    },
    handleSizeChange(val) {
      this.pagination.pageSize = val
      this.pagination.currentPage = 1
      this.getUserList()
    },
    handleCurrentChange(val) {
      this.pagination.currentPage = val
      this.getUserList()
    }
  }
}
</script>
```

**自习室管理页面实现：**

在 `client_admin/src/views/study_room_information/table.vue` 中：

```vue
<template>
  <div class="study-room-table">
    <div class="search-bar">
      <el-form :inline="true" :model="searchForm">
        <el-form-item label="自习室名称">
          <el-input v-model="searchForm.name_of_study_room" placeholder="请输入自习室名称"></el-input>
        </el-form-item>
        <el-form-item label="自习室类型">
          <el-select v-model="searchForm.study_room_type" placeholder="请选择类型">
            <el-option label="全部" value=""></el-option>
            <el-option label="付费自习室" value="付费自习室"></el-option>
            <el-option label="免费自习室" value="免费自习室"></el-option>
          </el-select>
        </el-form-item>
        <el-form-item label="区域">
          <el-input v-model="searchForm.region" placeholder="请输入区域"></el-input>
        </el-form-item>
        <el-form-item>
          <el-button type="primary" @click="handleSearch">搜索</el-button>
          <el-button @click="handleReset">重置</el-button>
        </el-form-item>
      </el-form>
    </div>
    
    <div class="table-toolbar">
      <el-button type="primary" @click="handleAdd">添加自习室</el-button>
      <el-button type="success" @click="handleBatchAudit" :disabled="selectedRooms.length === 0">
        批量审核
      </el-button>
    </div>
    
    <el-table :data="studyRoomList" @selection-change="handleSelectionChange" stripe>
      <el-table-column type="selection" width="55"></el-table-column>
      <el-table-column prop="study_room_information_id" label="ID" width="80"></el-table-column>
      <el-table-column prop="name_of_study_room" label="自习室名称"></el-table-column>
      <el-table-column prop="study_room_type" label="类型">
        <template slot-scope="scope">
          <el-tag :type="scope.row.study_room_type === '付费自习室' ? 'warning' : 'success'">
            {{ scope.row.study_room_type }}
          </el-tag>
        </template>
      </el-table-column>
      <el-table-column prop="region" label="区域"></el-table-column>
      <el-table-column prop="number_of_seats" label="座位数"></el-table-column>
      <el-table-column prop="spare_seats" label="剩余座位">
        <template slot-scope="scope">
          <el-tag :type="scope.row.spare_seats > 0 ? 'success' : 'danger'">
            {{ scope.row.spare_seats }}
          </el-tag>
        </template>
      </el-table-column>
      <el-table-column prop="hourly_rate" label="价格/小时"></el-table-column>
      <el-table-column prop="examine_state" label="审核状态">
        <template slot-scope="scope">
          <el-tag :type="getExamineStateType(scope.row.examine_state)">
            {{ scope.row.examine_state }}
          </el-tag>
        </template>
      </el-table-column>
      <el-table-column label="操作" width="250">
        <template slot-scope="scope">
          <el-button size="mini" @click="handleView(scope.row)">查看</el-button>
          <el-button size="mini" type="primary" @click="handleEdit(scope.row)">编辑</el-button>
          <el-button size="mini" type="warning" @click="handleAudit(scope.row)" v-if="scope.row.examine_state === '待审核'">
            审核
          </el-button>
          <el-button size="mini" type="danger" @click="handleDelete(scope.row)">删除</el-button>
        </template>
      </el-table-column>
    </el-table>
    
    <div class="pagination">
      <el-pagination
        @size-change="handleSizeChange"
        @current-change="handleCurrentChange"
        :current-page="pagination.currentPage"
        :page-sizes="[10, 20, 50, 100]"
        :page-size="pagination.pageSize"
        layout="total, sizes, prev, pager, next, jumper"
        :total="pagination.total">
      </el-pagination>
    </div>
    
    <!-- 审核对话框 -->
    <el-dialog title="自习室审核" :visible.sync="auditDialogVisible" width="400px">
      <el-form :model="auditForm" label-width="80px">
        <el-form-item label="审核结果">
          <el-radio-group v-model="auditForm.examine_state">
            <el-radio label="已通过">通过</el-radio>
            <el-radio label="已拒绝">拒绝</el-radio>
          </el-radio-group>
        </el-form-item>
        <el-form-item label="审核意见">
          <el-input v-model="auditForm.examine_reply" type="textarea" :rows="3" placeholder="请输入审核意见"></el-input>
        </el-form-item>
      </el-form>
      <div slot="footer" class="dialog-footer">
        <el-button @click="auditDialogVisible = false">取消</el-button>
        <el-button type="primary" @click="submitAudit">确定</el-button>
      </div>
    </el-dialog>
  </div>
</template>

<script>
export default {
  name: 'StudyRoomTable',
  data() {
    return {
      studyRoomList: [],
      selectedRooms: [],
      searchForm: {
        name_of_study_room: '',
        study_room_type: '',
        region: ''
      },
      pagination: {
        currentPage: 1,
        pageSize: 10,
        total: 0
      },
      auditDialogVisible: false,
      auditForm: {
        study_room_information_id: null,
        examine_state: '已通过',
        examine_reply: ''
      }
    }
  },
  created() {
    this.getStudyRoomList()
  },
  methods: {
    async getStudyRoomList() {
      try {
        const params = {
          page: this.pagination.currentPage,
          size: this.pagination.pageSize,
          ...this.searchForm
        }
        
        const response = await this.$get('~/api/study_room_information/list', params)
        if (response.result) {
          this.studyRoomList = response.result.list || []
          this.pagination.total = response.result.count || 0
        }
      } catch (error) {
        console.error('获取自习室列表失败', error)
        this.$message.error('获取自习室列表失败')
      }